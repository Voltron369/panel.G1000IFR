<Gauge Name="GPS_500" Version="1.0">
	<Image Name="gps_500_background.bmp" />
	<!-- local vars
		activateLeg				- 1=display activate leg popup, 0=hide activate leg popup
		blinkingField			- 1-based index of field that is blinking, 0 if no blinking
		blinkingFieldEnabled1	- bool to indicate whether field is available for cursor scrolling/blinking
		blinkingFieldEnabled2	- "
		blinkingFieldEnabled3	- "
		blinkingFieldSaved		- saved when going from one blinking screen to another to blink correct field on close
		currentGroup			- 0=nav, 1=wpt, 2=nrst, 3=fpl, 4=proc
		currentPageNAV		- current sub-page for page group 0
		currentPageWPT		- "                               1
		currentPageNRST		- "                               2
		currentPageFPL		- "                               3
		menuBlinker
		messagePopup			- 1=display message popup, 0=hide message popup
		modeCDI
		navPage0DetailLevel		- level of detail for nav page 0 (0=most, 3=least)
		navPage1DetailLevel		- level of detail for nav page 1 (0=most, 3=least)
		numberOfBlinkingFields	- number of blinkingFields; set to non-zero to prepare for PushCRSRButton handling
		popupMenu				- popup menu parameter
		popupMenuCurrent		- popup menu parameter
		popupMenuHeaderHeight	- popup menu parameter
		popupMenuHeight			- popup menu parameter
		popupMenuLineHeight		- popup menu parameter
		popupMenuMaxElements	- popup menu parameter
		popupMenuWidth			- popup menu parameter
		popupMenuX				- popup menu parameter
		popupMenuY				- popup menu parameter
		scaleCDI
		smallmap_ZoomStepDone
	-->
	<!-- Constants -->
	
	<Macro Name="FPLLineSpacing">26</Macro>

	<Macro Name="c">C:fs9gps</Macro>
	<Macro Name="g">C:fs9gps</Macro>
	<Macro Name="kFalse">0</Macro>
	<Macro Name="kTrue">1</Macro>
	<Macro Name="kOff">0</Macro>
	<Macro Name="kOn">1</Macro>
	<Macro Name="kDisabled">0</Macro>
	<Macro Name="kEnabled">1</Macro>
	
	<!-- main page group constants -->
	<Macro Name="kNAVPageGroup">0</Macro>
	<Macro Name="kWPTPageGroup">1</Macro>
	<Macro Name="kNRSTPageGroup">2</Macro>
	
	<!-- standalone page group constants -->
	<Macro Name="kFPLPageGroup">3</Macro>
	<Macro Name="kPROCPageGroup">4</Macro>

	<!-- NAV page constants -->
	<Macro Name="kNAVPageCnt">2</Macro>
	<Macro Name="kNAVPageDflt">0</Macro>
	<Macro Name="kNAVPageMap">1</Macro>

	<!-- WPT page constants -->
	<Macro Name="kWPTPageCnt">7</Macro>
	<Macro Name="kWPTPageAptLoc">0</Macro>
	<Macro Name="kWPTPageAptRun">1</Macro>
	<Macro Name="kWPTPageAptFreq">2</Macro>
	<Macro Name="kWPTPageAptApproach">3</Macro>
	<Macro Name="kWPTPageInt">4</Macro>
	<Macro Name="kWPTPageNdb">5</Macro>
	<Macro Name="kWPTPageVor">6</Macro>
	
	<!-- NRST page constants -->
	<Macro Name="kNRSTPageCnt">5</Macro>
	<Macro Name="kNRSTPageApt">0</Macro>
	<Macro Name="kNRSTPageInt">1</Macro>
	<Macro Name="kNRSTPageNDB">2</Macro>
	<Macro Name="kNRSTPageVOR">3</Macro>
	<Macro Name="kNRSTPageASP">4</Macro>

	<!-- popup constants -->
	<Macro Name="kPopupMenuSelectApproach">2</Macro>
	<Macro Name="kPopupMenuSelectTransition">3</Macro>

	<!-- B, C, D, MOA, RESTRICTED, PROHIBITED, WARNING, ALERT, DANGER, MODE_C, RADAR, TRAINING -->
	<Macro Name="kDisplayedAirspaces">0xEFC038</Macro>
	<!-- MOA, RESTRICTED, PROHIBITED, WARNING, ALERT, DANGER -->
	<Macro Name="kAlwaysDisplayedAirspaces">0x0FC000</Macro>

	<!-- General purpose macros -->
	<Macro Name="AirportIcon">%((@1))%{case}%{:1}%((@2,degrees) 45 / near 4 %)%{case}%{:0}1%{:1}2%{:2}3%{:3}4%{end}%{:2}5%{:3}6%{:4}7%{:5}8%{end}</Macro>
	<Macro Name="FormatLatitudeTabbed">%((@1,degrees) d 0 &gt;=)%{if}N%{else}S%{end}\t%(abs 6000 * near 6000 / d flr - b)%!02d!\t°%(60 *)%!05.2f!'</Macro>
	<Macro Name="FormatLongitudeTabbed">%((@1,degrees) d 0 &gt;=)%{if}E%{else}W%{end}\t%(abs 6000 * near 6000 / d flr - b)%!03d!\t°%(60 *)%!05.2f!'</Macro>
	<Macro Name="BlinkerCode">(@g:menuBlinker) d 0 &gt; if{ -- (&gt;@g:menuBlinker) 15 sp0 1 } els{ l0 -- s0 d 0 &lt;= if{ 30 sp0 } 15 &gt; }</Macro>
	<Macro Name="RestoreBlinkingField">(@g:blinkingFieldSaved) (&gt;@g:blinkingField) 0 (&gt;@g:blinkingFieldSaved)</Macro>
	<Macro Name="InitBlinker">70 (&gt;@g:menuBlinker)</Macro>
	<Macro Name="NumberOfPagesInCurrentGroup">1 1 @kNRSTPageCnt @kWPTPageCnt @kNAVPageCnt 5 (@g:currentGroup) case</Macro>
	<Macro Name="InvokePopupMenu">
		@1 (&gt;@g:popupMenu) @2 (&gt;@g:popupMenuX) @3 (&gt;@g:popupMenuY) @4 (&gt;@g:popupMenuWidth) @5 (&gt;@g:popupMenuHeight) 
		@6 (&gt;@g:popupMenuHeaderHeight) @7 (&gt;@g:popupMenuLineHeight) @8 (&gt;@g:popupMenuMaxElements) 
		0 (&gt;@g:popupMenuCurrent) (@g:blinkingField) (&gt;@g:blinkingFieldSaved) 0 (&gt;@g:blinkingField) @InitBlinker
	</Macro>
	
	<Macro Name="InvokePopupSelectApproach">@InvokePopupMenu(@kPopupMenuSelectApproach, 144, 36, 90, 171, 19, 1, (@c:WaypointAirportApproachesNumber)) (@g:currentAirportApproach) (&gt;@g:popupMenuCurrent)</Macro>
	<Macro Name="InvokePopupSelectTransition">@InvokePopupMenu(@kPopupMenuSelectTransition, 144, 36, 90, 171, 19, 1, (@g:currentAirportApproach) (&gt;@c:WaypointAirportCurrentApproach) (@c:WaypointAirportApproachTransitionsNumber)) (@g:currentAirportTransition) (&gt;@g:popupMenuCurrent)</Macro>
	
	<Macro Name="CancelPopupMenu">0 (&gt;@g:popupMenu) (@g:blinkingFieldSaved) (&gt;@g:blinkingField) 0 (&gt;@g:blinkingFieldSaved) @InitBlinker</Macro>
	<Macro Name="CalculateZoomFactor">2000 1500 1000 500 350 200 150 100 50 35 20 15 10 5 3.5 2.0 1.5 1.0 0.576037 0.329164 0.246873 0.164582 0.082290 0 24 @1 case</Macro>
	<Macro Name="FitToZoom">@1 0.55 * sp1 1 sp0 :1 @CalculateZoomFactor(l0) 1852 * l1 &lt; if{ l0 ++ sp0 g1 } l0</Macro>
	<Macro Name="RecalcSmallZoom">0 (&gt;@g:smallmap_ZoomStepDone)</Macro>
	<Macro Name="SetPageGroup">@1 (&gt;@g:currentGroup)</Macro>
	<!-- Page macros -->
	<Macro Name="ProcedureScrollTop">
		(@g:currentGroup) @kPROCPageGroup == if{
			(@g:blinkingField) 1 == (@g:blinkingFieldEnabled1) 0 == and if{ 2 (&gt;@g:blinkingField) }
			(@g:blinkingField) 2 == (@g:blinkingFieldEnabled2) 0 == and if{ 3 (&gt;@g:blinkingField) }
		}
	</Macro>
	<Macro Name="ProcedureScrollUp">
		(@g:currentGroup) @kPROCPageGroup == if{
			(@g:blinkingField) 3 == (@g:blinkingFieldEnabled3) 0 == and if{ 2 (&gt;@g:blinkingField) }
			(@g:blinkingField) 2 == (@g:blinkingFieldEnabled2) 0 == and if{ 1 (&gt;@g:blinkingField) }
			(@g:blinkingField) 1 == (@g:blinkingFieldEnabled1) 0 == and if{ 2 (&gt;@g:blinkingField) }
			(@g:blinkingField) 2 == (@g:blinkingFieldEnabled2) 0 == and if{ 3 (&gt;@g:blinkingField) }
		}
	</Macro>
	<Macro Name="ProcedureScrollDown">
		(@g:currentGroup) @kPROCPageGroup == if{
			(@g:blinkingField) 1 == (@g:blinkingFieldEnabled1) 0 == and if{ 2 (&gt;@g:blinkingField) }
			(@g:blinkingField) 2 == (@g:blinkingFieldEnabled2) 0 == and if{ 3 (&gt;@g:blinkingField) }
			(@g:blinkingField) 3 == (@g:blinkingFieldEnabled3) 0 == and if{ 2 (&gt;@g:blinkingField) }
			(@g:blinkingField) 2 == (@g:blinkingFieldEnabled2) 0 == and if{ 1 (&gt;@g:blinkingField) }
		}
	</Macro>
	<Macro Name="ProcedurePageInit">
		3 (&gt;@g:numberOfBlinkingFields)
		<!-- enable appropriate fields -->
		0 (&gt;@g:blinkingFieldEnabled1)
		(@c:FlightPlanIsLoadedApproach) d (&gt;@g:blinkingFieldEnabled1) (&gt;@g:blinkingFieldEnabled2)
		1 (&gt;@g:blinkingFieldEnabled3)
		(@c:FlightPlanIsLoadedApproach) if{ (@c:FlightPlanApproachTransitionIndex) 0 != if{ 2 } els{ 1 } } els{ 3 } (&gt;@g:blinkingField)
		@InitBlinker
		@ProcedureScrollTop
	</Macro>
	<Macro Name="WaypointPagesInit">
		(@g:currentPageWPT) 0 == (@g:currentPageWPT) 1 == (@g:currentPageWPT) 2 == (@g:currentPageWPT) 3 == || || || if{
			(C:fs9gps:WaypointAirportIdent) slen 0 == if{ 0 (&gt;@c:NearestAirportCurrentLine) (@c:NearestAirportCurrentICAO) (&gt;@c:WaypointAirportICAO) }
		}
		(@g:currentPageWPT) 4 == if{
			(@c:WaypointIntersectionIdent) slen 0 == if{ 0 (&gt;@c:NearestIntersectionCurrentLine) (@c:NearestIntersectionCurrentICAO) (&gt;@c:WaypointIntersectionICAO) }
		}
		(@g:currentPageWPT) 5 == if{
			(@c:WaypointNdbIdent) slen 0 == if{ 0 (&gt;@c:NearestNdbCurrentLine) (@c:NearestNdbCurrentICAO) (&gt;@c:WaypointNdbICAO) }
		}
		(@g:currentPageWPT) 6 == if{
			(@c:WaypointVorIdent) slen 0 == if{ 0 (&gt;@c:NearestVorCurrentLine) (@c:NearestVorCurrentICAO) (&gt;@c:WaypointVorICAO) }
		}
		(@g:currentPageWPT) 3 == if{
			@kOff (&gt;@g:selectApproach)
		}
	</Macro>	
	<Macro Name="PageInit">
		(C:fs9gps:currentGroup) 4 == (C:fs9gps:group4currentPage) 0 == &amp;&amp; if{ @ProcedurePageInit }
		(C:fs9gps:currentGroup) 1 == if{ @WaypointPagesInit }
		@RecalcSmallZoom
	</Macro>
	<!-- clear button macros -->
	<Macro Name="CancelInput">
		@InitBlinker 
		(@g:enteringInput) 0 != if{
			(@g:enteringInput) 100 &lt; if{ 
				(@g:enteringInput) 10 == if{ (@c:IcaoSearchInitialIcao) (&gt;@c:WaypointAirportICAO) } 
				(@g:enteringInput) 11 == if{ (@c:IcaoSearchInitialIcao) (&gt;@c:WaypointIntersectionICAO) } 
				(@g:enteringInput) 12 == if{ (@c:IcaoSearchInitialIcao) (&gt;@c:WaypointNdbICAO) } 
				(@g:enteringInput) 13 == if{ (@c:IcaoSearchInitialIcao) (&gt;@c:WaypointVorICAO) } 
				(@g:enteringInput) 31 == if{ (@c:IcaoSearchInitialIcao) (&gt;@c:FacilityICAO) } 
				0 (&gt;@c:IcaoSearchStopCursor) 
			}
			els{
				(@g:enteringInput) 110 == if{ (@c:NameSearchInitialIcao) (&gt;@c:WaypointAirportICAO) } 
				(@g:enteringInput) 131 == if{ (@c:NameSearchInitialIcao) (&gt;@c:FacilityICAO) } 
				0 (&gt;@c:NameSearchStopCursor) 
			}
			0 (&gt;@g:enteringInput)
		}
	</Macro>
	<Macro Name="EscapeMenu">
		@CancelInput
		0 (&gt;@g:blinkingField)
		0 (&gt;@g:popupMenu)
		0 (&gt;@g:listItems)
		0 (&gt;@g:directTo)
		0 (&gt;@g:activateLeg)
		0 (&gt;@g:noOptionMenu)
		@InitBlinker
	</Macro>
	<Macro Name="CLRButtonDelay">25</Macro>
	<Macro Name="CLRALLButton">
		@EscapeMenu
		0 (&gt;@g:messagePopup)
		0 (&gt;@g:setup_ColorTerrain)
		0 (&gt;@g:navPage0DetailLevel)
		0 (&gt;@g:navPage1DetailLevel)
		0 (&gt;@g:map_ZoomStep0)
		0 (&gt;@g:map_ZoomStep1)
		@RecalcSmallZoom
		@kNAVPageGroup (&gt;@g:currentGroup) 0 (&gt;@g:currentPageNAV) @PageInit
	</Macro>
	<Macro Name="MSGButtonDelay">25</Macro>
	<Macro Name="MSGToggle">(@g:messagesOff) ! (&gt;@g:messagesOff)</Macro>
	<Macro Name="FPLEnrouteHeader">(@c:FlightPlanIsActiveFlightPlan) (@c:FlightPlanIsLoadedApproach) and</Macro>
	<Macro Name="FPLLinesCount">
		0
		@FPLEnrouteHeader +
		(@c:FlightPlanIsActiveFlightPlan) if{ (@c:FlightPlanWaypointsNumber) + }
		(@c:FlightPlanIsLoadedApproach) if{ ++ (@c:FlightPlanApproachWaypointsNumber) + }
	</Macro>
	<Macro Name="FPLLineIndex">
		(@c:FlightPlanIsActiveApproach) if{
			(@c:FlightPlanIsActiveFlightPlan) if{ (@c:FlightPlanWaypointsNumber) } els{ 0 }
			++
			(@c:FlightPlanActiveApproachWaypoint) +
		} els{
			(@c:FlightPlanActiveWaypoint) 
		} 
		@FPLEnrouteHeader +
	</Macro>
	<Macro Name="FPLLegalLeg">
		@1
		@FPLEnrouteHeader - 
		sp0
		1 (@c:FlightPlanWaypointsNumber) 1 - l0 rng (@c:FlightPlanIsActiveFlightPlan) and
		(@c:FlightPlanIsActiveFlightPlan) if{ (@c:FlightPlanWaypointsNumber) } els{ 0 } ++ d
			(@c:FlightPlanApproachWaypointsNumber) + 1 - l0 rng (@c:FlightPlanIsLoadedApproach) and
				or
	</Macro>
	<Macro Name="FPLActivateLeg">
		@1
		@FPLEnrouteHeader -
		sp0
		1 (@c:FlightPlanWaypointsNumber) -- l0 rng (@c:FlightPlanIsActiveFlightPlan) and if{
			l0 (&gt;@c:FlightPlanActiveWaypoint)
		}
		els{
			l0 (@c:FlightPlanIsActiveFlightPlan) if{ (@c:FlightPlanWaypointsNumber) } els{ 0 } ++ - sp0
			0 (@c:FlightPlanApproachWaypointsNumber) -- l0 rng (@c:FlightPlanIsLoadedApproach) and if{
				l0 (&gt;@c:FlightPlanActiveApproachWaypoint)
			}
		}		
	</Macro>
	<Macro Name="FPLLegName">
		@1
		@FPLEnrouteHeader -
		sp0
		1 (@c:FlightPlanWaypointsNumber) -- l0 rng (@c:FlightPlanIsActiveFlightPlan) and if{
			l0 (&gt;@c:FlightPlanWaypointIndex) (@c:FlightPlanWaypointIdent)
		}
		els{
			l0 (@c:FlightPlanIsActiveFlightPlan) if{ (@c:FlightPlanWaypointsNumber) } els{ 0 } ++ - sp0
			0 (@c:FlightPlanApproachWaypointsNumber) -- l0 rng (@c:FlightPlanIsLoadedApproach) and if{
				l0 (&gt;@c:FlightPlanWaypointApproachIndex) (@c:FlightPlanWaypointApproachName)
			}
		}		
	</Macro>
	<Macro Name="FPLPrevLegName">
		@1
		@FPLEnrouteHeader -
		sp0
		1 (@c:FlightPlanWaypointsNumber) -- l0 rng (@c:FlightPlanIsActiveFlightPlan) and if{
			l0 -- d 0 &gt;= if{ (&gt;@c:FlightPlanWaypointIndex) (@c:FlightPlanWaypointIdent) } els{ p '' }
		}
		els{
			l0 (@c:FlightPlanIsActiveFlightPlan) if{ (@c:FlightPlanWaypointsNumber) } els{ 0 } ++ - sp0
			0 (@c:FlightPlanApproachWaypointsNumber) -- l0 rng (@c:FlightPlanIsLoadedApproach) and if{
				l0 -- d 0 &gt;= if{ (&gt;@c:FlightPlanWaypointApproachIndex) (@c:FlightPlanWaypointApproachName) } els{ p '' }
			}
		}		
	</Macro>
	<Macro Name="UpdateButton">
		(@1) 0 &gt; if{ (@1) ++ s0 (&gt;@1) l0 6 &gt; if{ 0 (&gt;@1) } }
	</Macro>
	<Update Hidden="No">
		<!-- Calculate current mode: 0 no plan 1 en route 2 terminal mode 3 approach -->
		(A:GPS IS ACTIVE WAY POINT, bool) if{
			(A:GPS IS APPROACH ACTIVE, bool) if{
				3
			} els{
				(A:GPS FLIGHT PLAN WP COUNT, number) (A:GPS FLIGHT PLAN WP INDEX, number) ++ == (A:GPS WP DISTANCE, nmiles) s0 30 &lt; and if{ 
					l0 10 &lt; if{ 3 } els{ 2 } 
				} els{ 1 } 
			}
		} els{ 0 }
		(&gt;@g:modeCDI)
		<!-- calculate CDI range -->
		0.3 1 5 0.001 4 (@g:modeCDI) case (@g:scaleCDI) s0 0.1 &gt; if{ l0 - 0.002 min -0.002 max l0 + } (&gt;@g:scaleCDI)
		<!-- calculate default zoom factor for the small map -->
		(@g:directTo) @kOff == (@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 1 == and and (@g:smallmap_ZoomStepDone) 0 == and if{
			(@g:currentAirportRunway) (&gt;@c:WaypointAirportCurrentRunway)
			(@c:WaypointAirportRunwayLength, meters) 0 != if{
				@FitToZoom((@c:WaypointAirportRunwayLength, meters)) (&gt;@g:smallmap_ZoomStep) 
				1 (&gt;@g:smallmap_ZoomStepDone)
			}
		}
		(@g:directTo) @kOff == (@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 3 == and and if{
			(@g:currentAirportApproach) (@c:WaypointAirportApproachesNumber) -- min 0 max (&gt;@g:currentAirportApproach)
			(@g:currentAirportTransition) (@c:WaypointAirportApproachTransitionsNumber) -- min 0 max (&gt;@g:currentAirportTransition)
			(@g:smallmap_ZoomStepDone) 0 == if{
				(@g:currentAirportApproach) (&gt;@c:WaypointAirportCurrentApproach) (@g:currentAirportTransition) (&gt;@c:WaypointAirportApproachCurrentTransition)
				(@c:WaypointAirportApproachTransitionSize, meters) 0 != if{
					@FitToZoom((@c:WaypointAirportApproachTransitionSize, meters)) (&gt;@g:smallmap_ZoomStep) 
					1 (&gt;@g:smallmap_ZoomStepDone)
				}
			}
		}
		<!-- calculate zoom factor range -->
		(@g:map_ZoomStep0) 0 == if{ 11 (&gt;@g:map_ZoomStep0) } 
		(@g:map_ZoomStep1) 0 == if{ 13 (&gt;@g:map_ZoomStep1) } 
		(@g:currentPageNAV) @kNAVPageDflt == if{ (@g:map_ZoomStep0) } els{ (@g:map_ZoomStep1) } (&gt;@g:map_ZoomStep)
		@CalculateZoomFactor((@g:map_ZoomStep)) (&gt;@g:map_ZoomFactor)
		(@g:smallmap_ZoomStep) 0 == if{ 10 (&gt;@g:smallmap_ZoomStep) } @CalculateZoomFactor((@g:smallmap_ZoomStep)) (&gt;@g:smallmap_ZoomFactor)
		<!-- make sure current element exist -->
		0 sp1
		(@g:directTo) 0 == if{ 
			(@g:currentPageWPT) 2 == (@g:currentGroup) @kWPTPageGroup  == and if{ (@c:WaypointAirportFrequenciesNumber) sp1 17 sp2 180 sp3 }
			(@g:currentPageNRST) 0 == (@g:currentGroup) @kNRSTPageGroup  == and if{ (@c:NearestAirportItemsNumber) sp1 38 sp2 177 sp3 }
			(@g:currentPageNRST) 1 == (@g:currentGroup) @kNRSTPageGroup  == and if{ (@c:NearestIntersectionItemsNumber) sp1 17 sp2 177 sp3 }
			(@g:currentPageNRST) 2 == (@g:currentGroup) @kNRSTPageGroup  == and if{ (@c:NearestNdbItemsNumber) sp1 17 sp2 177 sp3 }
			(@g:currentPageNRST) 3 == (@g:currentGroup) @kNRSTPageGroup  == and if{ (@c:NearestVorItemsNumber) sp1 17 sp2 177 sp3 }
			(@g:currentPageNRST) 4 == (@g:currentGroup) @kNRSTPageGroup  == and if{ (@c:NearestAirspaceItemsNumber) sp1 38 sp2 177 sp3 }
			(@g:currentPageFPL) 0 == (@g:currentGroup) @kFPLPageGroup  == and if{ @FPLLinesCount sp1 17 sp2 159 sp3 }
		}
		l1 (&gt;@g:listMaxElements)
		(@g:listCurrent) (@g:listMaxElements) -- min d 0 max (&gt;@g:listCurrent) 0 &lt; if{ 0 (&gt;@g:listItems) }
		<!-- scroll list if neccesary -->
		(@g:listItems) 0 != if{
			l1 l2 * l3 &gt;= <!-- if text is bigger than the area -->
			if{
				:10 (@g:listCurrent) ++ l2 * (@g:listScroll) - 5 + l3 &gt;= if{ (@g:listScroll) l2 + (&gt;@g:listScroll) g10 } <!--scroll down up current is on screen -->
				:11 (@g:listScroll) 0 &gt; (@g:listCurrent) l2 * (@g:listScroll) - 5 - 0 &lt;= and if{ (@g:listScroll) l2 - 0 max (&gt;@g:listScroll) g11 } <!--scroll down until current is on screen -->
			} els{
				0 (&gt;@g:listScroll)
			}
		}
		<!-- calculate list scrollbar -->
		0 (&gt;@g:listScrollbarVisible)
		(@g:listMaxElements) 0 &gt;
		if{
			l1 l2 * l3 &gt;= if{ 
				1 (&gt;@g:listScrollbarVisible)
				l3 8 - d d (&gt;@g:listScrollbarSize)
				l3 l1 l2 * / * (&gt;@g:listScrollbarLength)
				(@g:listScroll) l1 l2 * / * (&gt;@g:listScrollbarOffset) 
			} els{ 
				0 (&gt;@g:listScroll)
			}
		} 
		<!-- scroll menu if neccesary -->
		(@g:popupMenu) 0 != if{
			(@g:popupMenu) @kPopupMenuSelectApproach == if{
				(@c:WaypointAirportApproachesNumber) (&gt;@g:popupMenuMaxElements)
				
				
			}
			(@g:popupMenu) @kPopupMenuSelectTransition == if{
				(@c:WaypointAirportApproachTransitionsNumber) (&gt;@g:popupMenuMaxElements)
				
			}
			(@g:popupMenuCurrent) 0 &lt; if{ 0 (&gt;@g:popupMenuCurrent) }
			(@g:popupMenuCurrent) (@g:popupMenuMaxElements) -- min (&gt;@g:popupMenuCurrent)
			(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) &gt;= 
			if{
				:1 (@g:popupMenuHeaderHeight) (@g:popupMenuCurrent) ++ (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuScroll) - (@g:popupMenuHeight) &gt;= if{ 
					(@g:popupMenuScroll) 17 (@g:popupMenuLineHeight) * + (&gt;@g:popupMenuScroll) g1 }
				:2 (@g:popupMenuScroll) 0 &gt; if{ (@g:popupMenuCurrent) (@g:popupMenuLineHeight) 17 * * (@g:popupMenuScroll) - 0 &lt;= if{ 
					(@g:popupMenuScroll) 17 (@g:popupMenuLineHeight) * - (&gt;@g:popupMenuScroll) g2 } }
			} els{
				0 (&gt;@g:popupMenuScroll)
			}
		}
		<!-- calculate popup menu scrollbar -->
		0 (&gt;@g:popupMenuScrollbarVisible)
		(@g:popupMenuMaxElements) 0 &gt;
		if{
			(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + sp1
			(@g:popupMenuHeight) sp3
			l1 l3 &gt;= if{ 
				1 (&gt;@g:popupMenuScrollbarVisible)
				l3 8 - d d (&gt;@g:popupMenuScrollbarSize)
				l3 l1 / * (&gt;@g:popupMenuScrollbarLength)
				(@g:popupMenuScroll) l1 / * (&gt;@g:popupMenuScrollbarOffset) 
			} els{ 
				0 (&gt;@g:popupMenuScroll)
			}
		} 
		<!-- calculate number of blinking fields -->
		0 sp0
		(@g:currentGroup) @kWPTPageGroup == if{
			1 sp0
			(@g:currentPageWPT) @kWPTPageAptLoc == if{ 2 sp0 }
			(@g:currentPageWPT) @kWPTPageAptRun == if{ 2 sp0 }
			(@g:currentPageWPT) @kWPTPageAptApproach == if{ (@g:selectApproach) @kOn == (@g:currentAirportApproach) (@c:WaypointAirportApproachesNumber) &lt; and if{ 5 } els{ 3 } sp0 }
			(@g:currentPageWPT) @kWPTPageNdb == if{ 2 sp0 }
			(@g:currentPageWPT) @kWPTPageVor == if{ 2 sp0 }
		}
		(@g:currentGroup) @kPROCPageGroup == if{ 3 sp0 }
		(@g:directTo) @kOn == if{ 5 sp0 }
		l0 (&gt;@g:numberOfBlinkingFields)
		l0 (@g:blinkingField) min (&gt;@g:blinkingField)
		<!-- enable blinking fields -->	
		(@g:currentGroup) @kPROCPageGroup == if{
			(@c:FlightPlanIsLoadedApproach) d (&gt;@g:blinkingFieldEnabled1) (&gt;@g:blinkingFieldEnabled2)
		}
		<!-- update pages while typing -->
		(@g:enteringInput) 10 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointAirportICAO) }
		(@g:enteringInput) 11 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointIntersectionICAO) }
		(@g:enteringInput) 12 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointNdbICAO) }
		(@g:enteringInput) 13 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointVorICAO) }
		(@g:enteringInput) 31 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:FacilityICAO) }
		(@g:enteringInput) 110 == if{ (@c:NameSearchCurrentIcao) (&gt;@c:WaypointAirportICAO) }
		(@g:enteringInput) 131 == if{ (@c:NameSearchCurrentIcao) (&gt;@c:FacilityICAO) }
		<!-- update coords for the nearest pages -->
		(A:GPS POSITION LAT, Radians) (&gt;@c:NearestAirportCurrentLatitude, Radians) (A:GPS POSITION LON, Radians) (&gt;@c:NearestAirportCurrentLongitude, Radians) 9 (&gt;@c:NearestAirportMaximumItems) 200 (&gt;@c:NearestAirportMaximumDistance, NMiles) 
		(A:GPS POSITION LAT, Radians) (&gt;@c:NearestIntersectionCurrentLatitude, Radians) (A:GPS POSITION LON, Radians) (&gt;@c:NearestIntersectionCurrentLongitude, Radians) 9 (&gt;@c:NearestIntersectionMaximumItems) 200 (&gt;@c:NearestIntersectionMaximumDistance, NMiles)
		(A:GPS POSITION LAT, Radians) (&gt;@c:NearestNdbCurrentLatitude, Radians) (A:GPS POSITION LON, Radians) (&gt;@c:NearestNdbCurrentLongitude, Radians) 9 (&gt;@c:NearestNdbMaximumItems) 200 (&gt;@c:NearestNdbMaximumDistance, NMiles)
		(A:GPS POSITION LAT, Radians) (&gt;@c:NearestVorCurrentLatitude, Radians) (A:GPS POSITION LON, Radians) (&gt;@c:NearestVorCurrentLongitude, Radians) 9 (&gt;@c:NearestVorMaximumItems) 200 (&gt;@c:NearestVorMaximumDistance, NMiles)
		(A:GPS POSITION LAT, Radians) (&gt;@c:NearestAirspaceCurrentLatitude, Radians) (A:GPS POSITION LON, Radians) (&gt;@c:NearestAirspaceCurrentLongitude, Radians) (A:GPS POSITION ALT, Meters) (&gt;@c:NearestAirspaceCurrentAltitude, Meters)
			(A:GPS GROUND TRUE TRACK, Radians) (&gt;@c:NearestAirspaceTrueGroundTrack, Radians) (A:GPS GROUND SPEED, knots) (&gt;@c:NearestAirspaceGroundSpeed, knots) 
			2 (&gt;@c:NearestAirspaceNearDistance, nmiles) 200 (&gt;@c:NearestAirspaceNearAltitude, feet) 10 (&gt;@c:NearestAirspaceAheadTime, minutes)
			9 (&gt;@c:NearestAirspaceMaximumItems) 100 (&gt;@c:NearestAirspaceMaximumDistance, NMiles)
			@kDisplayedAirspaces (&gt;@c:NearestAirspaceQuery)
		<!-- check CLR button -->
		(@g:clrButtonDown) 0 != if{
			(@g:clrButtonCount) ++ d (&gt;@g:clrButtonCount) @CLRButtonDelay == if{ @CLRALLButton }
		}
		<!-- check MSG button -->
		(@g:msgButtonDown) 0 != if{
			(@g:msgButtonCount) ++ d (&gt;@g:msgButtonCount) @MSGButtonDelay == if{ @MSGToggle }
		}
		<!-- pop all the buttons back up -->
		@UpdateButton(@g:crsrButtonDown)
		@UpdateButton(@g:directButtonDown)
		@UpdateButton(@g:entButtonDown)
		@UpdateButton(@g:fplButtonDown)
		@UpdateButton(@g:menuButtonDown)
		@UpdateButton(@g:msgButtonDown)
		@UpdateButton(@g:nrstButtonDown)
		@UpdateButton(@g:obsButtonDown)
		@UpdateButton(@g:procButtonDown)
		@UpdateButton(@g:terrButtonDown)
		@UpdateButton(@g:zoominButtonDown)
		@UpdateButton(@g:zoomoutButtonDown)
	</Update>
	<Element>
		<Position X="399" Y="36" />
		<Select>
			<Value>(@g:zoominButtonDown) 0 != 2 * (@g:zoomoutButtonDown) 0 != +</Value>
			<Case Value="0">
				<Image Name="gps_500_rng_up_out.bmp" />
			</Case>
			<Case Value="1">
				<Image Name="gps_500_rng_up_in.bmp" />
			</Case>
			<Case Value="2">
				<Image Name="gps_500_rng_down_in.bmp" />
			</Case>
		</Select>
	</Element>
  <Element>
    <Position X="367" Y="293" />
    <Select>
      <Value>(@g:crsrButtonDown) 0 !=</Value>
      <Case Value="1">
        <Image Name="gps_500_push_crsr_in.bmp" />
      </Case>
    </Select>
  </Element>
  <Element>
    <Position X="42" Y="308" />
    <Select>
      <Value>(@g:nrstButtonDown) 0 !=</Value>
      <Case Value="0">
        <Image Name="gps_500_nrst_out.bmp" />
      </Case>
      <Case Value="1">
        <Image Name="gps_500_nrst_in.bmp" />
      </Case>
    </Select>
  </Element>
	<Element>
		<Position X="99" Y="309" />
		<Select>
			<Value>(@g:obsButtonDown) 0 !=</Value>
			<Case Value="0">
				<Image Name="gps_500_obs_out.bmp" />
			</Case>
			<Case Value="1">
				<Image Name="gps_500_obs_in.bmp" />
			</Case>
		</Select>
	</Element>
  <Element>
    <Position X="153" Y="309" />
    <Select>
      <Value>(@g:msgButtonDown) 0 !=</Value>
      <Case Value="0">
        <Image Name="gps_500_msg_out.bmp" />
      </Case>
      <Case Value="1">
        <Image Name="gps_500_msg_in.bmp" />
      </Case>
    </Select>
  </Element>
	<Element>
		<Position X="207" Y="309" />
		<Select>
			<Value>(@g:fplButtonDown) 0 !=</Value>
			<Case Value="0">
				<Image Name="gps_500_fpl_out.bmp" />
			</Case>
			<Case Value="1">
				<Image Name="gps_500_fpl_in.bmp" />
			</Case>
		</Select>
	</Element>
  <Element>
    <Position X="263" Y="309" />
    <Select>
      <Value>(@g:terrButtonDown) 0 !=</Value>
      <Case Value="0">
        <Image Name="gps_500_terr_out.bmp" />
      </Case>
      <Case Value="1">
        <Image Name="gps_500_terr_in.bmp" />
      </Case>
    </Select>
  </Element>
  <Element>
    <Position X="315" Y="309" />
    <Select>
      <Value>(@g:procButtonDown) 0 !=</Value>
      <Case Value="0">
        <Image Name="gps_500_proc_out.bmp" />
      </Case>
      <Case Value="1">
        <Image Name="gps_500_proc_in.bmp" />
      </Case>
    </Select>
  </Element>
	<Element>
		<Position X="398" Y="226" />
		<Select>
			<Value>(@g:entButtonDown) 0 !=</Value>
			<Case Value="0">
				<Image Name="gps_500_ent_out.bmp" />
			</Case>
			<Case Value="1">
				<Image Name="gps_500_ent_in.bmp" />
			</Case>
		</Select>
	</Element>
  <Element>
    <Position X="398" Y="192" />
    <Select>
      <Value>(@g:clrButtonDown) 0 !=</Value>
      <Case Value="0">
        <Image Name="gps_500_clr_out.bmp" />
      </Case>
      <Case Value="1">
        <Image Name="gps_500_clr_in.bmp" />
      </Case>
    </Select>
  </Element>
	<Element>
		<Position X="398" Y="157" />
		<Select>
			<Value>(@g:menuButtonDown) 0 !=</Value>
			<Case Value="0">
				<Image Name="gps_500_menu_out.bmp" />
			</Case>
			<Case Value="1">
				<Image Name="gps_500_menu_in.bmp" />
			</Case>
		</Select>
	</Element>
  <Element>
    <Position X="398" Y="123" />
    <Select>
      <Value>(@g:directButtonDown) 0 !=</Value>
      <Case Value="0">
        <Image Name="gps_500_direct_out.bmp" />
      </Case>
      <Case Value="1">
        <Image Name="gps_500_direct_in.bmp" />
      </Case>
    </Select>
  </Element>
	
	
	
	
	
	
	
	
	
	

	<Element Name="ViewWindow" Container="Yes">
		<Position X="36" Y="40" />
		<RelClip Left="0" Top="0" Width="337" Height="248" />
    <Failures>
      <SYSTEM_ELECTRICAL_PANELS Action="NoDraw" />
      <SYSTEM_ELECTRICAL_AVIONICS Action="NoDraw" />
    </Failures>
		<Element Name="LeftPanel">
			<Element Name="WPTRect">
				<Position X="0" Y="0" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="WPTText">
				<Position X="2" Y="0" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>WPT</String>
				</Text>
			</Element>
			<Element Name="BRGRect">
				<Position X="0" Y="33" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="BRGText">
				<Position X="2" Y="33" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>BRG</String>
				</Text>
			</Element>
			<Element Name="CTSRect">
				<Position X="0" Y="66" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="CTSText">
				<Position X="2" Y="66" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>CTS</String>
				</Text>
			</Element>
			<Element Name="ETARect">
				<Position X="0" Y="99" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="ETAText">
				<Position X="2" Y="99" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>ETA</String>
				</Text>
			</Element>
			<Element Name="VSRRect">
				<Position X="0" Y="132" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="VSRText">
				<Position X="2" Y="132" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>VSR</String>
				</Text>
			</Element>
			<Element Name="TKERect">
				<Position X="0" Y="165" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="TKEText">
				<Position X="2" Y="165" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>TKE</String>
				</Text>
			</Element>
			<Element Name="XTKRect">
				<Position X="0" Y="198" />
				<Rectangle Width="54" Height="13" FillColor="#2A76E8" Bright="Yes" />
			</Element>
			<Element Name="XTKText">
				<Position X="2" Y="198" />
				<Text X="50" Y="13" Length="3" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
					<String>XTK</String>
				</Text>
			</Element>
			<Element Name="WPTInfoRect">
				<Position X="0" Y="13" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="WPTInfoText">
				<Position X="2" Y="13" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP NEXT ID, string))%!s!%{end}</String>
				</FormattedText>
			</Element>
			<Element Name="BRGInfoRect">
				<Position X="0" Y="46" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="BRGInfoText">
				<Position X="2" Y="46" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP BEARING, degrees) d360)%!03d!\{dplo=M}%{end}</String>
				</FormattedText>
			</Element>
			<Element Name="CTSInfoRect">
				<Position X="0" Y="79" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="CTSInfoText">
				<Position X="2" Y="79" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS COURSE TO STEER, degrees) d360)%!03d!\{dplo=M}%{end}</String>
				</FormattedText>
			</Element>
			<Element Name="ETAInfoRect">
				<Position X="0" Y="112" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="ETAInfoText">
				<Position X="2" Y="112" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP ETA, hours) flr 100 %)%!02d!:%((A:GPS WP ETA, minutes) flr 60 %)%!02d!\{dpl=LC}%{end}</String>
				</FormattedText>
			</Element>
			<Element Name="VSRInfoRect">
				<Position X="0" Y="145" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="VSRInfoText">
				<Position X="2" Y="145" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP VERTICAL SPEED, feet per second))%!d!\{dpl=fs}%{end}</String>
				</FormattedText>
			</Element>
			<Element Name="TKEInfoRect">
				<Position X="0" Y="178" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="TKEInfoText">
				<Position X="2" Y="178" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP TRACK ANGLE ERROR, degrees))%!d!°%{end}</String>
				</FormattedText>
			</Element>
			<Element Name="XTKInfoRect">
				<Position X="0" Y="211" />
				<Rectangle Width="54" Height="20" Color="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element Name="XTKInfoText">
				<Position X="2" Y="211" />
				<FormattedText X="50" Y="20" Font="Arial Black" FontSize="13" Adjust="Left" VerticalAdjust="Center" Color="Yellow" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP CROSS TRK, nmiles) s1 abs d s0 100 &gt;=)%{if}%!d!%{else}%(l0 10 &gt;=)%{if}%!.1f!%{else}%!.2f!%{end}%{end}\{dpl=nm}%(l1 100 * near s0 0 &gt;)%{if}&gt;%{else}%(l0 0 &lt;)%{if}&lt;%{end}%{end}%{end}</String>
				</FormattedText>
			</Element>
		</Element>
		<!-- Nav Group -->
		<!-- Map view -->
		<Element Name="MapView Pages">
			<Visible>(@g:currentGroup) @kNAVPageGroup ==</Visible>
			<Position X="59" Y="0" />
			<CustomDraw Name="fs9gps:map" X="275" Y="230" LayerTerrain="Yes" LayerBorders="Yes" LayerFlightPlan="Yes" FlightPlanLineWidth="2.5" ActiveColorLayerFlightPlan="0x7010B0" PastColorLayerFlightPlan="0xF0F0F0" ColorLayerFlightPlan="0xF0F0F0" Bright="Yes" CenterX="137">
				<CenterY>(@g:currentPageNAV) @kNAVPageDflt == if{ 150 } els{ 98 }</CenterY>
				<Zoom>(@g:map_ZoomFactor) 1852.0 *</Zoom>
				<Latitude>(A:GPS POSITION LAT, Radians)</Latitude>
				<Longitude>(A:GPS POSITION LON, Radians)</Longitude>
				<Heading>(A:GPS GROUND TRUE TRACK, Radians)</Heading>
				<DetailLayerTerrain>(@g:setup_ColorTerrain) 0 == if{ 1 } els{ 2 }</DetailLayerTerrain>
				<LayerAirports>(@g:map_ZoomFactor) 3000 &lt; 3 (@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } &gt; and</LayerAirports>
				<LayerVORs>(@g:map_ZoomFactor) 3000 &lt; 2 (@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } &gt; and</LayerVORs>
				<LayerILSs>(@g:map_ZoomFactor) 50 &lt; 2 (@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } &gt; and</LayerILSs>
				<LayerNDBs>(@g:map_ZoomFactor) 100 &lt; 2 (@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } &gt; and</LayerNDBs>
				<LayerIntersections>(@g:map_ZoomFactor) 15 &lt; 2 (@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } &gt; and</LayerIntersections>
				<LayerAirspaces>1</LayerAirspaces>
				<ObjectDetailLayerAirspaces>(@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } 1 &gt;= if{ @kAlwaysDisplayedAirspaces } els{ @kDisplayedAirspaces }</ObjectDetailLayerAirspaces>
				<ColorLayerAirspaces>(@g:setup_ColorTerrain) 0 == if{ 0x808080 } els{ 0xFFFFFF }</ColorLayerAirspaces>
				<ObjectDetailLayerAirports>0 0x5 0x5 0x5 0x5 0x15 0x15 0x15 0x15 0x15 0x15 0x15 0x1F 0x1F 0x5F 0x5F 0x5F 0x5F 0x5F 0x5F 0x5F 0x5F 0x5F 0x5F 24 (@g:map_ZoomStep) case</ObjectDetailLayerAirports>
				<TextDetailLayerAirports>0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 24 (@g:map_ZoomStep) case</TextDetailLayerAirports>
				<TextDetailLayerVORs>0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 24 (@g:map_ZoomStep) case</TextDetailLayerVORs>
				<TextDetailLayerILSs>0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 24 (@g:map_ZoomStep) case</TextDetailLayerILSs>
				<TextDetailLayerNDBs>0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 24 (@g:map_ZoomStep) case</TextDetailLayerNDBs>
				<TextDetailLayerIntersections>0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 24 (@g:map_ZoomStep) case</TextDetailLayerIntersections>
				<ObjectDetailLayerFlightPlan>0xE 0xF (@c:FlightPlanIsActiveApproach) ?</ObjectDetailLayerFlightPlan>
				<TrackUp>(@g:currentPageNAV) @kNAVPageDflt ==</TrackUp>
				<LayerVehicles>0</LayerVehicles>
			</CustomDraw>
			<Element>
				<Position X="0" Y="200" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Rectangle Width="277" Height="30" FillColor="0x080808" Bright="Yes" />
			</Element>
			<Element>
				<!-- Aircraft symbol -->
				<Position X="137" Y="150" />
				<Polygon FillColor="%((@g:setup_ColorTerrain) if{ 0x503030 } els{ 0xF0D0D0 })" Bright="Yes">
					<Point X=" 0.5" Y="-7.5" />
					<Point X="   2" Y="-6.5" />
					<Point X="   2" Y="  -4" />
					<Point X=" 7.5" Y="  -4" />
					<Point X=" 7.5" Y="-1.5" />
					<Point X="   2" Y="-1.5" />
					<Point X="   2" Y=" 4.5" />
					<Point X=" 4.5" Y=" 4.5" />
					<Point X=" 4.5" Y=" 6.5" />
					<Point X="-4.5" Y=" 6.5" />
					<Point X="-4.5" Y=" 4.5" />
					<Point X="  -2" Y=" 4.5" />
					<Point X="  -2" Y="-1.5" />
					<Point X="-7.5" Y="-1.5" />
					<Point X="-7.5" Y="  -4" />
					<Point X="  -2" Y="  -4" />
					<Point X="  -2" Y="-6.5" />
					<Point X="-0.5" Y="-7.5" />
				</Polygon>
				<Rotate>
					<Value>(@g:currentPageNAV) @kNAVPageDflt == if{ 0 } els{ (A:GPS GROUND TRUE TRACK, Radians) }</Value>
				</Rotate>
				<Shift>
					<Value>(@g:currentPageNAV) @kNAVPageDflt == if{ 0 } els{ 52 }</Value>
					<Scale Y="-1" />
				</Shift>
			</Element>
			<Element>
				<Position X="137" Y="173" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<CustomDraw Name="fs9gps:rose" X="260" Y="130" CenterX="130" CenterY="150" Radius="150" LineWidth="1" Font="Arial" FontSize="12" BigFontSize="13" Bright="Yes">
					<Color>(@g:setup_ColorTerrain) if{ 0x703030 } els{ 0xF0D0D0 }</Color>
					<BackgroundColor>(@g:setup_ColorTerrain) if{ 0 } els{ 0x080808 }</BackgroundColor>
					<Heading>(A:GPS GROUND MAGNETIC TRACK, Radians)</Heading>
					<Pivot X="130" Y="150" />
				</CustomDraw>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool) (@g:currentPageNAV) 0 == and</Visible>
				<Element>
					<Position X="137" Y="173" />
					<Visible>(A:GPS WP TRACK ANGLE ERROR, degrees) abs 60 &lt;</Visible>
					<Polyline Color="0x208020" LineWidth="3">
						<Point X="-5" Y="12" />
						<Point X=" 0" Y="0" />
						<Point X=" 5" Y="12" />
						<Pivot X="0" Y="148" />
					</Polyline>
					<Rotate>
						<Value>(A:GPS WP TRACK ANGLE ERROR, radians)</Value>
					</Rotate>
				</Element>
				<Element>
					<Position X="137" Y="173" />
					<Visible>(A:GPS WP TRACK ANGLE ERROR, degrees) 60 &gt;</Visible>
					<Polyline Color="0x208020" LineWidth="3">
						<Point X="-2" Y="0" />
						<Point X=" 2" Y="6" />
						<Point X="-2" Y="12" />
						<Pivot X="0" Y="148" />
					</Polyline>
					<Rotate>
						<Value>60 dgrd</Value>
					</Rotate>
				</Element>
				<Element>
					<Position X="137" Y="173" />
					<Visible>(A:GPS WP TRACK ANGLE ERROR, degrees) -60 &lt;</Visible>
					<Polyline Color="0x208020" LineWidth="3">
						<Point X=" 2" Y="0" />
						<Point X="-2" Y="6" />
						<Point X=" 2" Y="12" />
						<Pivot X="0" Y="148" />
					</Polyline>
					<Rotate>
						<Value>-60 dgrd</Value>
					</Rotate>
				</Element>
			</Element>
			<Element>
				<Position X="137" Y="22" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Polyline LineWidth="1" Color="%((@g:setup_ColorTerrain) if{ 0x703030 } els{ 0xF0D0D0 })" Bright="Yes">
					<Point X="-22" Y="-6" />
					<Point X="-20" Y="-4" />
					<Point X="-4" Y="-4" />
					<Point X="0" Y="0" />
					<Point X="4" Y="-4" />
					<Point X="20" Y="-4" />
					<Point X="22" Y="-6" />
				</Polyline>
			</Element>
			<Element>
				<Position X="137" Y="0" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<FormattedText X="40" Y="17" Font="Arial Black" FontSize="14" Adjust="Center" Color="Yellow" BackgroundColor="#080808" Bright="Yes">
					<String>%((A:GPS GROUND MAGNETIC TRACK, degrees) d360)%!03d!\{dplo=M}</String>
					<Pivot X="20" Y="0" />
				</FormattedText>
			</Element>
			<Element>
				<Position X="93" Y="2" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Text X="20" Y="11" Length="3" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Bottom" Multiline="No" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>TRK</String>
				</Text>
			</Element>
			<Element>
				<Position X="18" Y="23" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<FormattedText X="40" Y="17" Font="Arial Black" FontSize="14" Adjust="Center" Color="Yellow" BackgroundColor="#080808" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP DESIRED TRACK, degrees) d360)%!03d!%{else}_ _ _%{end}\{dplo=M}</String>
					<Pivot X="20" Y="14" />
				</FormattedText>
			</Element>
			<Element>
				<Position X="8" Y="0" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Text X="20" Y="11" Length="3" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Bottom" Multiline="No" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>DTK</String>
				</Text>
			</Element>
			<Element>
				<Position X="249" Y="23" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<FormattedText X="45" Y="17" Font="Arial Black" FontSize="14" Adjust="Center" Color="Yellow" BackgroundColor="#080808" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP DISTANCE, nmiles) near)%!d!%{else}_ _ _%{end}\{dpl=nm}</String>
					<Pivot X="20" Y="14" />
				</FormattedText>
			</Element>
			<Element>
				<Position X="239" Y="0" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Text X="20" Y="11" Length="3" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Bottom" Multiline="No" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>DIS</String>
				</Text>
			</Element>
			<Element>
				<Position X="18" Y="222" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<FormattedText X="40" Y="17" Font="Arial Black" FontSize="14" Adjust="Center" Color="Yellow" BackgroundColor="#080808" Bright="Yes">
					<String>%((A:GPS GROUND SPEED, knots) near)%!d!\{dpl=kn}</String>
					<Pivot X="20" Y="14" />
				</FormattedText>
			</Element>
			<Element>
				<Position X="8" Y="200" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Text X="20" Y="11" Length="2" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Bottom" Multiline="No" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>GS</String>
				</Text>
			</Element>
			<Element>
				<Position X="249" Y="222" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<FormattedText X="45" Y="17" Font="Arial Black" FontSize="14" Adjust="Center" Color="Yellow" BackgroundColor="#080808" Bright="Yes">
					<String>%((A:GPS IS ACTIVE WAY POINT, bool))%{if}%((A:GPS WP ETE, hours) flr 100 %)%!02d!:%((A:GPS WP ETE, minutes) flr 60 %)%!02d!%{else}_ _:_ _%{end}</String>
					<Pivot X="20" Y="14" />
				</FormattedText>
			</Element>
			<Element>
				<Position X="239" Y="200" />
				<Visible>(@g:currentPageNAV) @kNAVPageDflt ==</Visible>
				<Text X="20" Y="11" Length="3" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Bottom" Multiline="No" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>ETE</String>
				</Text>
			</Element>
			<Element>
				<Position X="10" Y="121" />
				<FormattedText X="38" Y="12" Font="Arial Black" FontSize="11" Adjust="Center" VerticalAdjust="Bottom" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>
						%((@g:map_ZoomFactor) s0 5 &gt;=)%{if}%(l0)%!d!\{dpl=nm}%{else}%(l0 1 &gt;=)%{if}%(l0)%!.1f!\{dpl=nm}%{else}%(l0 6076 *)%!d!\{dpl=ft}%{end}%{end}
						%((@g:currentPageNAV) @kNAVPageDflt == if{ (@g:navPage0DetailLevel) } els{ (@g:navPage1DetailLevel) } s0 0 !=)%{if}-%(l0)%!d!%{end}
					</String>
				</FormattedText>
			</Element>
			<Element>
				<Position X="16" Y="111" />
				<Text X="24" Y="11" Length="5" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Bottom" Multiline="No" Color="0xF0D0D0" BackgroundColor="#080808" Bright="Yes">
					<String>Zoom</String>
				</Text>
			</Element>
		</Element>
		<Element Name="Active Leg Indicator">
			<Visible>(@g:currentGroup) @kNAVPageGroup == (@g:currentPageNAV) @kNAVPageDflt == (A:GPS IS ACTIVE WAY POINT, bool) and and</Visible>
			<Position X="196" Y="180" />
			<Rectangle Width="160" Height="20" FillColor="#080808" Bright="Yes">
				<Pivot X="80" Y="0" />
			</Rectangle>
			<Element>
				<Position X="0" Y="6" />
				<Select>
					<Value>(A:GPS IS APPROACH ACTIVE, bool) if{ 8 0 0 0 3 2 7 6 5 4 0 0 12 (A:GPS APPROACH WP TYPE, enum) case } els{ 1 0 (A:GPS IS DIRECTTO FLIGHTPLAN, bool) ? }</Value>
					<Case Value="0">
						<Image Name="course_to.bmp"><Pivot X="9.5" /></Image>
					</Case>
					<Case Value="1">
						<Image Name="direct_to.bmp"><Pivot X="9.5" /></Image>
					</Case>
					<Case Value="2">
						<Image Name="left_hand.bmp"><Pivot X="17" /></Image>
					</Case>
					<Case Value="3">
						<Image Name="right_hand.bmp"><Pivot X="17" /></Image>
					</Case>
					<Case Value="4">
						<Image Name="left_turn.bmp"><Pivot X="17" /></Image>
					</Case>
					<Case Value="5">
						<Image Name="right_turn.bmp"><Pivot X="17" /></Image>
					</Case>
					<Case Value="6">
						<Image Name="arc_left.bmp"><Pivot X="9.5" /></Image>
					</Case>
					<Case Value="7">
						<Image Name="arc_right.bmp"><Pivot X="9.5" /></Image>
					</Case>
					<Case Value="8">
						<Image Name="vectors_to_final.bmp"><Pivot X="9" /></Image>
					</Case>
				</Select>
			</Element>
			<Element>
				<Position X="20" Y="0" />
				<FormattedText X="60" Y="20" Font="Arial Black" FontSize="14" Adjust="Left" Color="Yellow" Bright="Yes">
					<String>
            %((A:GPS IS APPROACH ACTIVE, bool))%{if}
            %((A:GPS APPROACH WP TYPE, enum))%{case}
            %{:2}proc. turn
            %{:3}proc. turn
            %{:6}hold
            %{:7}hold
            %{:8}%((A:GPS TARGET DISTANCE, nmiles))%!0.1f!\{dpl=nm}
            %{:9}%((E:UNITS OF MEASURE,enum) 1 &lt;= if{ (A:GPS TARGET ALTITUDE, feet) } els{ (A:GPS TARGET ALTITUDE, meters) } )%!d!%((E:UNITS OF MEASURE, enum) 1 &lt;=)%{if}\{dplo=ft}%{else}m%{end}
            %{:10}man seq
            %{else}%((A:GPS WP NEXT ID, string))%!s!
            %{end}
            %{else}
            %((A:GPS WP NEXT ID, string))%!s!
            %{end}
          </String>
				</FormattedText>				
			</Element>
			<Element>
				<Position X="-20" Y="0" />
				<FormattedText X="60" Y="20" Font="Arial Black" FontSize="14" Adjust="Right" Color="Yellow" Bright="Yes">
					<Pivot X="60" />
					<String>
						%((A:GPS WP PREV ID, string))%!s!
					</String>
				</FormattedText>				
			</Element>
		</Element>
		<Element Name="CDI">
			<Position X="196" Y="210" />
			<Visible>(@g:currentPageNAV) 0 == (@g:currentGroup) @kNAVPageGroup == and</Visible>
			<Element>
				<Rectangle Width="160" Height="20" LineWidth="1" Color="0xF0D0D0" Bright="Yes">
					<Pivot X="80" Y="4" />
				</Rectangle>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool)</Visible>
				<Polygon FillColor="Yellow" Bright="Yes">
					<Point X="0" Y="0" />
					<Point X="7" Y="8" />
					<Point X="-7" Y="8" />
				</Polygon>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool) ! (A:GPS WP CROSS TRK, nmiles) (@g:scaleCDI) /-/ &gt;= ||</Visible>
				<Element>
					<Position X="-35" Y="5" />
					<Rectangle Height="4" Width="4" FillColor="0xF0D0D0" Bright="Yes">
						<Pivot X="2" Y="2" />
					</Rectangle>
				</Element>
				<Element>
					<Position X="-70" Y="5" />
					<Rectangle Height="4" Width="4" FillColor="0xF0D0D0" Bright="Yes">
						<Pivot X="2" Y="2" />
					</Rectangle>
				</Element>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool) ! (A:GPS WP CROSS TRK, nmiles) (@g:scaleCDI) &lt;= ||</Visible>
				<Element>
					<Position X="35" Y="5" />
					<Rectangle Height="4" Width="4" FillColor="0xF0D0D0" Bright="Yes">
						<Pivot X="2" Y="2" />
					</Rectangle>
				</Element>
				<Element>
					<Position X="70" Y="5" />
					<Rectangle Height="4" Width="4" FillColor="0xF0D0D0" Bright="Yes">
						<Pivot X="2" Y="2" />
					</Rectangle>
				</Element>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool) (A:GPS WP CROSS TRK, nmiles) abs (@g:scaleCDI) &lt;= and</Visible>
				<Rectangle Height="14" Width="4" LineWidth="1" Color="0xF0D0D0" Bright="Yes">
					<Pivot X="1" Y="1" />
				</Rectangle>
				<Shift>
					<Value>(A:GPS WP CROSS TRK, nmiles) (@g:scaleCDI) / </Value>
					<Nonlinearity>
						<Item X="-70" Value="-1" />
						<Item X="70" Value="1" />
					</Nonlinearity>
				</Shift>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool) (A:GPS WP CROSS TRK, nmiles) (@g:scaleCDI) &gt; and</Visible>
				<Position X="72" Y="0" />
				<FormattedText X="50" Y="17" Font="Arial Black" FontSize="11" Adjust="Right" Color="Yellow" Bright="Yes">
					<String>%((A:GPS WP CROSS TRK, nmiles) abs d s0 100 &gt;=)%{if}%!d!%{else}%(l0 10 &gt;=)%{if}%!.1f!%{else}%!.2f!%{end}%{end}\{dpl=nm}&gt;</String>
					<Pivot X="50" Y="2" />
				</FormattedText>
			</Element>
			<Element>
				<Visible>(A:GPS IS ACTIVE WAY POINT, bool) (A:GPS WP CROSS TRK, nmiles) (@g:scaleCDI) /-/ &lt; and</Visible>
				<Position X="-72" Y="0" />
				<FormattedText X="50" Y="17" Font="Arial Black" FontSize="11" Adjust="Left" Color="Yellow" Bright="Yes">
					<String>&lt;%((A:GPS WP CROSS TRK, nmiles) abs d s0 100 &gt;=)%{if}%!d!%{else}%(l0 10 &gt;=)%{if}%!.1f!%{else}%!.2f!%{end}%{end}\{dpl=nm}</String>
					<Pivot X="0" Y="2" />
				</FormattedText>
			</Element>
		</Element>
		<Macro Name="AirportInfoBox">
			%((@g:enteringInput) 10 == (@g:popupMenu) 0 == and)
			%{if}
				%((@c:IcaoSearchCurrentIdent) slen sp1 0 sp0)
				%{loop}
					%((@c:IcaoSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:IcaoSearchCurrentIdent) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
					%(l0 ++ s0 l1 &lt;=)
				%{next}
			%{else}
				%((@g:blinkingField) 1 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportIdent) d slen 0 ==)%{if}_ _ _ _%{else}%!s!%{end}\{nr}
			%{end}
			\t	
			\{img@AirportIcon(@c:WaypointAirportKind, @c:WaypointAirportLongestRunwayDirection)}\t
			%((@c:WaypointAirportType))%{case}%{:1}Public%{:2}Military%{:3}Private%{end}
		</Macro>
		<Macro Name="DisplayAirportName">
			%((@g:enteringInput) 110 == (@g:popupMenu) 0 == and)
			%{if}
				%((@c:NameSearchCurrentName) slen sp1 0 sp0)
				%{loop}
					%((@c:NameSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:NameSearchCurrentName) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
					%(l0 ++ s0 l1 &lt;=)
				%{next}
			%{else}
				%((@g:blinkingField) 2 ==)%{if}\{blnk}%((@c:WaypointAirportName) d slen 0 ==)%{if}_ _ _ _ _ _ _ _ _ _%{else}%!s!%{end}\{nr}%{else}%((@c:WaypointAirportName))%!s!%{end}
			%{end}\n
		</Macro>
		<!-- Waypoint Group -->
		<Element Name="Airport Location Page">
			<Visible>(@g:currentPageWPT) 0 == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="10" Y="5" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="10" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>APT</String>
					</Text>
				</Element>
				<!-- Airport Info Box -->
				<Element>
					<Position X="70" Y="5" />
					<Rectangle Width="150" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="4" Y="1" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Airport_Hard_NS.bmp" />
							<Image Name="Airport_Hard_NE_SW.bmp" />
							<Image Name="Airport_Hard_EW.bmp" />
							<Image Name="Airport_Hard_NW_SE.bmp" />
							<Image Name="Airport_Soft.bmp" />
							<Image Name="Anchor.bmp" />
							<Image Name="Helipad.bmp" />
							<Image Name="Private_Airfield.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								@AirportInfoBox
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="10" Y="30" />
					<Text X="150" Y="10" Length="30" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FACILITY, CITY &amp; REGION</String>
					</Text>
				</Element>
				<!-- Info -->
				<Element>
					<Position X="10" Y="45" />
					<Rectangle Width="260" Height="55" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="47" />
					<FormattedText X="256" Y="59" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
						<BlinkCode>@BlinkerCode</BlinkCode>
						<String>
							@DisplayAirportName
							%((@c:WaypointAirportCity))%!s!\n
							%((@c:WaypointAirportRegion))%!s!\n
						</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="13" Y="105" />
					<Text X="70" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>POSITION</String>
					</Text>
				</Element>
				<Element>
					<Position X="10" Y="117" />
					<Rectangle Width="120" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="119" />
					<FormattedText X="114" Y="34" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="17R,49R,49">
						<String>@FormatLatitudeTabbed(@c:WaypointAirportLatitude)\n@FormatLongitudeTabbed(@c:WaypointAirportLongitude)</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="123" Y="105" />
					<Text X="50" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>ELEV</String>
					</Text>
				</Element>
				<Element>
					<Position X="120" Y="117" />
					<Rectangle Width="70" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="122" Y="119" />
					<FormattedText X="66" Y="34" Font="Arial Black" FontSize="14" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>%((E:UNITS OF MEASURE, enum) 1 &lt;= if{ (@c:WaypointAirportElevation, feet) } els{  (@c:WaypointAirportElevation, meters) } )%!d!%((E:UNITS OF MEASURE, enum) 1 &lt;=)%{if}\{dpl=ft}%{else}m%{end}</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="193" Y="105" />
					<Text X="50" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FUEL</String>
					</Text>
				</Element>
				<Element>
					<Position X="190" Y="117" />
					<Rectangle Width="70" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="192" Y="119" />
					<FormattedText X="114" Y="34" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
						<String>%((@c:WaypointAirportFuel1))%!s!\n%((@c:WaypointAirportFuel2))%!s!</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="13" Y="162" />
					<Text X="70" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>APPROACH</String>
					</Text>
				</Element>
				<Element>
					<Position X="10" Y="174" />
					<Rectangle Width="120" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="176" />
					<FormattedText X="114" Y="14" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>%((@c:WaypointAirportBestApproach))%!s!</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="123" Y="162" />
					<Text X="50" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>RADAR</String>
					</Text>
				</Element>
				<Element>
					<Position X="120" Y="174" />
					<Rectangle Width="70" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="122" Y="176" />
					<FormattedText X="66" Y="14" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>%((@c:WaypointAirportRadarCoverage))%{case}%{:1}No%{:2}Yes%{end}</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="193" Y="162" />
					<Text X="60" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>AIRSPACE</String>
					</Text>
				</Element>
				<Element>
					<Position X="190" Y="174" />
					<Rectangle Width="70" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="192" Y="176" />
					<FormattedText X="66" Y="14" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>%((@c:WaypointAirportAirspace))%!s!</String>
					</FormattedText>
				</Element>
			</Element>
		</Element>
		<Element Name="Airport Runways Page">
			<Visible>(@g:currentPageWPT) 1 == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="10" Y="5" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="10" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>APT</String>
					</Text>
				</Element>
				<!-- Airport Info Box -->
				<Element>
					<Position X="70" Y="5" />
					<Element>
						<Position X="4" Y="1" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Airport_Hard_NS.bmp" />
							<Image Name="Airport_Hard_NE_SW.bmp" />
							<Image Name="Airport_Hard_EW.bmp" />
							<Image Name="Airport_Hard_NW_SE.bmp" />
							<Image Name="Airport_Soft.bmp" />
							<Image Name="Anchor.bmp" />
							<Image Name="Helipad.bmp" />
							<Image Name="Private_Airfield.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								@AirportInfoBox
							</String>
						</FormattedText>
					</Element>
					<Rectangle Width="150" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="195" Y="30" />
					<Text X="60" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>RUNWAY</String>
					</Text>
				</Element>
				<Element>
					<Position X="195" Y="43" />
					<Rectangle Width="75" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="71" Y="16" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:currentAirportRunway) (&gt;@c:WaypointAirportCurrentRunway))
								%((@g:blinkingField) 2 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportRunwayDesignation))%!s!\{nr}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="195" Y="67" />
					<Text X="60" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>INFO</String>
					</Text>
				</Element>
				<Element>
					<Position X="195" Y="80" />
					<Rectangle Width="75" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="71" Y="36" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
							<String>
								\{ladj=L}%(   (E:UNITS OF MEASURE, enum) 1 &lt; if{ (@c:WaypointAirportRunwayLength, feet) } els{ (@c:WaypointAirportRunwayLength, meters) } )%!d!%((E:UNITS OF MEASURE, enum) 1 &lt;)%{if}\{dpl=ft}%{else}m%{end}\n
                \{ladj=R}x %( (E:UNITS OF MEASURE, enum) 1 &lt; if{ (@c:WaypointAirportRunwayWidth, feet) }  els{ (@c:WaypointAirportRunwayWidth,  meters) } )%!d!%((E:UNITS OF MEASURE, enum) 1 &lt;)%{if}\{dpl=ft}%{else}m%{end}\n
              </String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="195" Y="124" />
					<Rectangle Width="75" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="71" Y="36" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<String>
								\{ladj=L}%((@c:WaypointAirportRunwaySurface))%{case}%{:1}Concrete%{:2}Asphalt%{:101}Grass%{:102}Turf%{:103}Dirt%{:104}Coral
										%{:105}Gravel%{:106}Oil%{:107}Steel%{:108}Bituminus%{:109}Brick%{:110}Macadam%{:111}Planks%{:112}Sand%{:113}Shale%{:114}Tarmac%{:115}Snow%{:116}Ice%{:201}Water%{end}\n
								\{ladj=R}Surface\n								
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="195" Y="168" />
					<Rectangle Width="75" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="71" Y="36" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<String>
								%((@c:WaypointAirportRunwayLighting))%{case}%{:1}No Lights%{:2}Part Time%{:3}Full Time%{:4}Frequency%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Airport Frequency Page">
			<Visible>(@g:currentPageWPT) 2 == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="10" Y="5" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="10" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>APT</String>
					</Text>
				</Element>
				<!-- Airport Info Box -->
				<Element>
					<Position X="70" Y="5" />
					<Rectangle Width="150" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="4" Y="1" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Airport_Hard_NS.bmp" />
							<Image Name="Airport_Hard_NE_SW.bmp" />
							<Image Name="Airport_Hard_EW.bmp" />
							<Image Name="Airport_Hard_NW_SE.bmp" />
							<Image Name="Airport_Soft.bmp" />
							<Image Name="Anchor.bmp" />
							<Image Name="Helipad.bmp" />
							<Image Name="Private_Airfield.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								@AirportInfoBox
							</String>
						</FormattedText>
					</Element>
				</Element>
				<!-- List -->
				<Element>
					<Position X="10" Y="30" />
					<Rectangle Width="260" Height="190" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="4" Y="5" />
						<FormattedText X="256" Y="180" Font="Arial Black" FontSize="14" LineSpacing="17" Color="0x00FF00" Bright="Yes" Tabs="0,190C,250R">
							<Font FontSize="12" />
							<ScrollY>(@g:listScroll)</ScrollY>
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@c:WaypointAirportFrequenciesNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:WaypointAirportCurrentFrequency))
										%((@g:listCurrent) l1 == (@g:listItems) 1 == and)%{if}\{blnk}%{end}
										%((@c:WaypointAirportFrequencyName))%!s!\{nr}\t
										%((@c:WaypointAirportFrequencyLimit))%{case}%{:1}\{dpl=RX}%{:2}\{dpl=TX}%{end}\t
										%((@c:WaypointAirportFrequencyValue,Mhz) 100 * near d 100 div)%!03d!.\{fnt1}%(100 %)%!02d!\{fnt}
										\n
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="271" Y="35" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="172" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="172" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="172" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="176" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 172 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Airport Approach Page">
			<Visible>(@g:currentPageWPT) @kWPTPageAptApproach == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="10" Y="5" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="10" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>APT</String>
					</Text>
				</Element>
				<!-- Airport Info Box -->
				<Element>
					<Position X="70" Y="5" />
					<Element>
						<Position X="4" Y="1" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Airport_Hard_NS.bmp" />
							<Image Name="Airport_Hard_NE_SW.bmp" />
							<Image Name="Airport_Hard_EW.bmp" />
							<Image Name="Airport_Hard_NW_SE.bmp" />
							<Image Name="Airport_Soft.bmp" />
							<Image Name="Anchor.bmp" />
							<Image Name="Helipad.bmp" />
							<Image Name="Private_Airfield.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								@AirportInfoBox
							</String>
						</FormattedText>
					</Element>
					<Rectangle Width="150" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="195" Y="30" />
					<Text X="60" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>APPROACH</String>
					</Text>
				</Element>
				<Element>
					<Position X="192" Y="43" />
					<Rectangle Width="87" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="83" Y="16" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:currentAirportApproach) (&gt;@c:WaypointAirportCurrentApproach))
								%((@g:blinkingFieldSaved) 2 ==)%{if}\{rev}%{end}
								%((@g:blinkingField) 2 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportApproachName))%!s!%((@c:WaypointAirportApproachGps))%{if}\{dpl=GPS}%{end}\{nr}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="192" Y="67" />
					<Text X="60" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>TRANS</String>
					</Text>
				</Element>
				<Element>
					<Position X="192" Y="80" />
					<Rectangle Width="87" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="83" Y="16" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:currentAirportTransition) (&gt;@c:WaypointAirportApproachCurrentTransition))
								%((@g:blinkingFieldSaved) 3 ==)%{if}\{rev}%{end}
								%((@g:blinkingField) 3 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportApproachTransitionName))%!s!\{nr}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Visible>(@g:selectApproach) 1 == (@g:currentAirportApproach) (@c:WaypointAirportApproachesNumber) &lt; and</Visible>
					<Element>
						<Position X="197" Y="161" />
						<FormattedText X="85" Y="18" Font="Arial Black" FontSize="16" Adjust="Center" Color="White" Bright="Yes">
							<String>Load?</String>
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>%((@g:blinkingField) 4 ==)%{if}\{blnk}%{end}Load?\{nr}</String>
						</FormattedText>
					</Element>
					<Element>
						<Position X="197" Y="184" />
						<FormattedText X="85" Y="13" Font="Arial Black" FontSize="10" Adjust="Center" Color="Cyan" Bright="Yes">
							<String>OR</String>
						</FormattedText>
					</Element>
					<Element>
						<Position X="197" Y="200" />
						<FormattedText X="85" Y="18" Font="Arial Black" FontSize="16" Adjust="Center" Color="White" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>%((@g:blinkingField) 5 ==)%{if}\{blnk}%{end}Activate?\{nr}</String>
						</FormattedText>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Intersection Page">
			<Visible>(@g:currentPageWPT) 4 == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="7" Y="6" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="11" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>INT</String>
					</Text>
				</Element>
				<Element>`
					<Position X="34" Y="2" />
					<Element>
						<Position X="4" Y="2" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Intersection.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:enteringInput) 11 == (@g:popupMenu) 0 == and)
								%{if}
									%((@c:IcaoSearchCurrentIdent) slen sp1 0 sp0)
									%{loop}
										%((@c:IcaoSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:IcaoSearchCurrentIdent) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
										%(l0 ++ s0 l1 &lt;=)
									%{next}
								%{else}
									%((@g:blinkingField) 1 ==)%{if}\{blnk}%{end}%((@c:WaypointIntersectionIdent) d slen 0 ==)%{if}_ _ _ _%{else}%!s!%{end}\{nr}
								%{end}
								\t%((@c:WaypointIntersectionRegion) slen 0 !=)%{if}\{img1}%{end}
							</String>
						</FormattedText>
					</Element>
					<Rectangle Width="150" Height="21" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="30" />
					<Element>
						<Position X="5" Y="0" />
						<Text X="50" Y="12" Length="6" Font="Arial Black" FontSize="11" Color="Cyan" Multiline="No" Bright="Yes">
							<String>REGION</String>
						</Text>
					</Element>
					<Element>
						<Position X="0" Y="15" />
						<Element>
							<Position X="4" Y="2" />
							<FormattedText X="115" Y="18" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
								<String>
									%((@c:WaypointIntersectionRegion))%!s!
								</String>
							</FormattedText>
						</Element>
						<Rectangle Width="124" Height="22" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					</Element>
				</Element>
				<Element>
					<Position X="12" Y="73" />
					<Element>
						<Position X="5" Y="0" />
						<Text X="100" Y="12" Length="8" Font="Arial Black" FontSize="11" Color="Cyan" Multiline="No" Bright="Yes">
							<String>POSITION</String>
						</Text>
					</Element>
					<Element>
						<Position X="0" Y="16" />
						<Element>
							<Position X="4" Y="2" />
							<FormattedText X="114" Y="34" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="17R,49R,49">
								<String>@FormatLatitudeTabbed(@c:WaypointIntersectionLatitude)\n@FormatLongitudeTabbed(@c:WaypointIntersectionLongitude)</String>
							</FormattedText>
						</Element>
						<Rectangle Width="124" Height="38" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					</Element>
				</Element>
				<Element>
					<Position X="153" Y="30" />
					<Element>
						<Position X="5" Y="0" />
						<Text X="90" Y="12" Length="11" Font="Arial Black" FontSize="11" Color="Cyan" Multiline="No" Bright="Yes">
							<String>NEAREST VOR</String>
						</Text>
					</Element>
					<Element>
						<Position X="0" Y="15" />
						<Element>
							<Position X="4" Y="2" />
							<FormattedText X="115" Y="18" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,55">
								<Image Name="Vor.bmp" />
								<Image Name="Vor_Dme.bmp" />
								<Image Name="Dme.bmp" />
								<Image Name="Tacan.bmp" />
								<Image Name="VorTac.bmp" />
								<Image Name="Localizer.bmp" />
								<String>
									%((@c:WaypointIntersectionNearestVorIdent))%!s!\t
									\{img%((@c:NearestVorCurrentType))%{case}%{:1}1%{:2}2%{:3}3%{:4}4%{:5}5%{:6}6%{end}}
								</String>
							</FormattedText>
						</Element>
						<Rectangle Width="115" Height="22" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					</Element>
					<Element>
						<Position X="0" Y="33" />
						<Element>
							<Position X="4" Y="1" />
							<Text X="115" Y="16" Length="10" Font="Arial Black" FontSize="11" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
								<String>RAD</String>
							</Text>
						</Element>
						<Element>
							<Position X="4" Y="18" />
							<FormattedText X="50" Y="18" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
								<String>
									%((@c:WaypointIntersectionNearestVorMagneticRadial, degrees) d360)%!03d!\{dplo=M}
								</String>
							</FormattedText>
						</Element>
						<Rectangle Width="58" Height="60" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					</Element>
					<Element>
						<Position X="58" Y="33" />
						<Element>
							<Position X="4" Y="1" />
							<Text X="115" Y="16" Length="10" Font="Arial Black" FontSize="11" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
								<String>DIS</String>
							</Text>
						</Element>
						<Element>
							<Position X="4" Y="18" />
							<FormattedText X="50" Y="18" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Center" Color="0x00FF00" Bright="Yes">
								<String>
									%((@c:WaypointIntersectionNearestVorDistance, nmiles) d 1000 &gt;=)%{if}%!d!%{else}%!.1f!%{end}\{dpl=nm}
								</String>
							</FormattedText>
						</Element>
						<Rectangle Width="57" Height="60" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="NDBs Page">
			<Visible>(@g:currentPageWPT) 5 == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="7" Y="6" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="11" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>NDB</String>
					</Text>
				</Element>
				<Element>
					<Position X="34" Y="2" />
					<Element>
						<Position X="4" Y="2" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Ndb.bmp" />
							<Image Name="Marker.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:enteringInput) 12 == (@g:popupMenu) 0 == and)
								%{if}
									%((@c:IcaoSearchCurrentIdent) slen sp1 0 sp0)
									%{loop}
										%((@c:IcaoSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:IcaoSearchCurrentIdent) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
										%(l0 ++ s0 l1 &lt;=)
									%{next}
								%{else}
									%((@g:blinkingField) 1 ==)%{if}\{blnk}%{end}%((@c:WaypointNdbIdent) d slen 0 ==)%{if}_ _ _ _%{else}%!s!%{end}\{nr}
								%{end}
								\t%((@c:WaypointNdbFrequency, kHZ) 0 !=)%{if}\{img%((@c:WaypointNdbType) 1 ==)%{if}2%{else}1%{end}}%{end}
							</String>
						</FormattedText>
					</Element>
					<Rectangle Width="150" Height="21" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="10" Y="30" />
					<Text X="150" Y="10" Length="30" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FACILITY, CITY &amp; REGION</String>
					</Text>
				</Element>
				<!-- Info -->
				<Element>
					<Position X="10" Y="45" />
					<Rectangle Width="260" Height="55" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="47" />
					<FormattedText X="256" Y="59" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
						<String>
							%((@c:WaypointNdbName))%!s!\n
							%((@c:WaypointNdbCity))%!s!\n
							%((@c:WaypointNdbRegion))%!s!\n
						</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="13" Y="105" />
					<Text X="70" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>POSITION</String>
					</Text>
				</Element>
				<Element>
					<Position X="10" Y="117" />
					<Rectangle Width="120" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="119" />
					<FormattedText X="114" Y="34" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="17R,49R,49">
						<String>@FormatLatitudeTabbed(@c:WaypointNdbLatitude)\n@FormatLongitudeTabbed(@c:WaypointNdbLongitude)</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="123" Y="105" />
					<Text X="50" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FREQ</String>
					</Text>
				</Element>
				<Element>
					<Position X="120" Y="117" />
					<Rectangle Width="70" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="122" Y="119" />
					<FormattedText X="66" Y="34" Font="Arial Black" FontSize="14" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<BlinkCode>@BlinkerCode</BlinkCode>
						<String>%((@g:blinkingField) 2 ==)%{if}\{blnk}%{end}%((@c:WaypointNdbFrequency, KHz))%!3.1f!\{nr}</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="193" Y="105" />
					<Text X="70" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>WX BRDCST</String>
					</Text>
				</Element>
				<Element>
					<Position X="190" Y="117" />
					<Rectangle Width="70" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="192" Y="119" />
					<FormattedText X="66" Y="34" Font="Arial Black" FontSize="14" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>%((@c:WaypointNdbWeatherBroadcast))%{case}%{:1}No%{:2}Yes%{end}</String>
					</FormattedText>
				</Element>
			</Element>
		</Element>
		<Element Name="VOR Page">
			<Visible>(@g:currentPageWPT) 6 == (@g:currentGroup) @kWPTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="7" Y="6" />
					<Text X="50" Y="20" Length="3" Font="Arial Black" FontSize="11" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
						<String>VOR</String>
					</Text>
				</Element>
				<Element>
					<Position X="34" Y="2" />
					<Element>
						<Position X="4" Y="2" />
						<FormattedText X="142" Y="18" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,85">
							<Image Name="Vor.bmp" />
							<Image Name="Vor_Dme.bmp" />
							<Image Name="Dme.bmp" />
							<Image Name="Tacan.bmp" />
							<Image Name="VorTac.bmp" />
							<Image Name="Localizer.bmp" />
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:enteringInput) 13 == (@g:popupMenu) 0 == and)
								%{if}
									%((@c:IcaoSearchCurrentIdent) slen sp1 0 sp0)
									%{loop}
										%((@c:IcaoSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:IcaoSearchCurrentIdent) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
										%(l0 ++ s0 l1 &lt;=)
									%{next}
								%{else}
									%((@g:blinkingField) 1 ==)%{if}\{blnk}%{end}%((@c:WaypointVorIdent) d slen 0 ==)%{if}_ _ _ _%{else}%!s!%{end}\{nr}
								%{end}
								\t
								\{img%((@c:WaypointVorType))%{case}%{:1}1%{:2}2%{:3}3%{:4}4%{:5}5%{:6}6%{end}}\t
								%((@c:WaypointVorClass))%{case}%{:1}Term.%{:2}Low Alt%{:3}High Alt%{:4}Local.%{:5}Test%{end}
							</String>
						</FormattedText>
					</Element>
					<Rectangle Width="150" Height="21" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="10" Y="30" />
					<Text X="150" Y="10" Length="30" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FACILITY, CITY &amp; REGION</String>
					</Text>
				</Element>
				<!-- Info -->
				<Element>
					<Position X="10" Y="45" />
					<Rectangle Width="260" Height="55" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="47" />
					<FormattedText X="256" Y="59" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
						<String>
							%((@c:WaypointVorName))%!s!\n
							%((@c:WaypointVorCity))%!s!\n
							%((@c:WaypointVorRegion))%!s!\n
						</String>
					</FormattedText>
					<Element>
						<Position X="170" Y="35" />
						<Text X="25" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
							<String>VAR</String>
						</Text>
						<Element>
							<Position X="30" Y="0" />
							<FormattedText X="50" Y="30" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
								<String>%((@c:WaypointVorMagneticVariation) dnor near b 180 &gt;=)%{if}E%(360 - /-/)%!03d!%{else}W%!03d!%{end}°</String>
							</FormattedText>
						</Element>
					</Element>
				</Element>
				<Element>
					<Position X="13" Y="105" />
					<Text X="70" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>POSITION</String>
					</Text>
				</Element>
				<Element>
					<Position X="10" Y="117" />
					<Rectangle Width="120" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="12" Y="119" />
					<FormattedText X="114" Y="34" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="17R,49R,49">
						<String>@FormatLatitudeTabbed(@c:WaypointVorLatitude)\n@FormatLongitudeTabbed(@c:WaypointVorLongitude)</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="123" Y="105" />
					<Text X="50" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FREQ</String>
					</Text>
				</Element>
				<Element>
					<Position X="120" Y="117" />
					<Rectangle Width="70" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="122" Y="119" />
					<FormattedText X="66" Y="34" Font="Arial Black" FontSize="14" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<BlinkCode>@BlinkerCode</BlinkCode>
						<String>%((@g:blinkingField) 2 ==)%{if}\{blnk}%{end}%((@c:WaypointVorFrequency, MHz))%!3.2f!\{nr}</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="193" Y="105" />
					<Text X="70" Y="10" Length="10" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>WX BRDCST</String>
					</Text>
				</Element>
				<Element>
					<Position X="190" Y="117" />
					<Rectangle Width="70" Height="40" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
				</Element>
				<Element>
					<Position X="192" Y="119" />
					<FormattedText X="66" Y="34" Font="Arial Black" FontSize="14" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>%((@c:WaypointVorWeatherBroadcast))%{case}%{:1}No%{:2}Yes%{end}</String>
					</FormattedText>
				</Element>
			</Element>
		</Element>
		<!-- NRST Group -->
		<Element Name="Nearest Airport Page">
			<Visible>(@g:currentPageNRST) 0 == (@g:currentGroup) @kNRSTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="11" Length="16" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>NEAREST AIRPORT</String>
					</Text>
				</Element>
				<Element>
					<Position X="24" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>APT</String>
					</Text>
				</Element>
				<Element>
					<Position X="108" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>BRG</String>
					</Text>
				</Element>
				<Element>
					<Position X="175" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>DIS</String>
					</Text>
				</Element>
				<Element>
					<Position X="241" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>APR</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="32" />
					<Rectangle Width="254" Height="187" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="248" Y="177" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,60,85,190R,215">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<ScrollY>(@g:listScroll)</ScrollY>
							<Font FontSize="12" />
							<Image Name="Airport_Hard_NS.bmp" />
							<Image Name="Airport_Hard_NE_SW.bmp" />
							<Image Name="Airport_Hard_EW.bmp" />
							<Image Name="Airport_Hard_NW_SE.bmp" />
							<Image Name="Airport_Soft.bmp" />
							<Image Name="Anchor.bmp" />
							<Image Name="Helipad.bmp" />
							<Image Name="Private_Airfield.bmp" />
							<String>
								%((@c:NearestAirportItemsNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:NearestAirportCurrentLine))
										%((@g:listCurrent) l1 == (@g:listItems) 1 == and)%{if}\{blnk}%{end}%((@c:NearestAirportCurrentIdent))%!s!\{nr}\t
										\{img@AirportIcon(@c:NearestAirportCurrentAirportKind, @c:NearestAirportCurrentLongestAirportDirection)}\t
										%((@c:NearestAirportCurrentTrueBearing, degrees) (A:GPS MAGVAR, degrees) - d360)%!03d!\{dplo=M}\t
										%((@c:NearestAirportCurrentDistance, nmiles))%!.1f!\{dpl=nm}\t
										%((@c:NearestAirportCurrentBestApproach))%!s!\n
										\{tabs=50R,60,145,244R}
										%((@c:NearestAirportCurrentComFrequencyName))%!s!\t
										%((@c:NearestAirportCurrentComFrequencyValue, MHz) 1000 * near d 1000 div)%!03d!.\{fnt1}%(1000 %)%!03d!\{fnt}\t
										rwy\t
										%((E:UNITS OF MEASURE, enum) 1 &lt; if{ (@c:NearestAirportCurrentLongestRunwayLength, feet) } els{ (@c:NearestAirportCurrentLongestRunwayLength, meters) } )%!d!%((E:UNITS OF MEASURE, enum) 1 &lt;)%{if}\{dpl=ft}%{else}m%{end}
                %(l1 ++ s1 l2 &lt; d)
										%{if}\n\{lsp=4}\{ladj=C}\{tabs=}\{line=240}\n%{end}
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="271" Y="37" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="169" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="169" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="169" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="173" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 169 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Nearest Intersection Page">
			<Visible>(@g:currentPageNRST) 1 == (@g:currentGroup) @kNRSTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="11" Length="20" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>NEAREST INTERSECTION</String>
					</Text>
				</Element>
				<Element>
					<Position X="24" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>INT</String>
					</Text>
				</Element>
				<Element>
					<Position X="130" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>BRG</String>
					</Text>
				</Element>
				<Element>
					<Position X="241" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>DIS</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="32" />
					<Rectangle Width="254" Height="187" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="248" Y="177" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,65,105,240R">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<ScrollY>(@g:listScroll)</ScrollY>
							<Image Name="Intersection.bmp" />
							<String>
								%((@c:NearestIntersectionItemsNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:NearestIntersectionCurrentLine))
										%((@g:listCurrent) l1 == (@g:listItems) 1 == and)%{if}\{blnk}%{end}%((@c:NearestIntersectionCurrentIdent))%!s!\{nr}\t
										\{img1}\t
										%((@c:NearestIntersectionCurrentTrueBearing, degrees) (A:GPS MAGVAR, degrees) - d360)%!03d!\{dplo=M}\t
										%((@c:NearestIntersectionCurrentDistance, nmiles))%!.1f!\{dpl=nm}\t
										%(l1 ++ s1 l2 &lt; d)
										%{if}\n%{end}
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="271" Y="37" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="169" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="169" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="169" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="173" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 169 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Nearest NDB Page">
			<Visible>(@g:currentPageNRST) 2 == (@g:currentGroup) @kNRSTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="11" Length="16" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>NEAREST NDB</String>
					</Text>
				</Element>
				<Element>
					<Position X="24" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>NDB</String>
					</Text>
				</Element>
				<Element>
					<Position X="108" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>BRG</String>
					</Text>
				</Element>
				<Element>
					<Position X="175" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>DIS</String>
					</Text>
				</Element>
				<Element>
					<Position X="228" Y="20" />
					<Text X="30" Y="11" Length="4" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FREQ</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="32" />
					<Rectangle Width="254" Height="187" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="258" Y="177" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,60,85,185R,200">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<ScrollY>(@g:listScroll)</ScrollY>
							<Font FontSize="12" />
							<Image Name="Ndb.bmp" />
							<Image Name="Marker.bmp" />
							<String>
								%((@c:NearestNdbItemsNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:NearestNdbCurrentLine))
										%((@g:listCurrent) l1 == (@g:listItems) 1 == and)%{if}\{blnk}%{end}%((@c:NearestNdbCurrentIdent))%!s!\{nr}\t
										\{img%((@c:WaypointNdbType) 1 ==)%{if}2%{else}1%{end}}\t
										%((@c:NearestNdbCurrentTrueBearing, degrees) (A:GPS MAGVAR, degrees) - d360)%!03d!\{dplo=M}\t
										%((@c:NearestNdbCurrentDistance, nmiles))%!.1f!\{dpl=nm}\t
										%((@c:NearestNdbCurrentFrequency, KHz) 10 * near d 10 div)%!03d!.\{fnt1}%(10 %)%!01d!\{fnt}\t
										%(l1 ++ s1 l2 &lt; d)
										%{if}\n%{end}
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="271" Y="37" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="169" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="169" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="169" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="173" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 169 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Nearest VOR Page">
			<Visible>(@g:currentPageNRST) 3 == (@g:currentGroup) @kNRSTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="11" Length="16" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>NEAREST VOR</String>
					</Text>
				</Element>
				<Element>
					<Position X="24" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>VOR</String>
					</Text>
				</Element>
				<Element>
					<Position X="108" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>BRG</String>
					</Text>
				</Element>
				<Element>
					<Position X="175" Y="20" />
					<Text X="25" Y="11" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>DIS</String>
					</Text>
				</Element>
				<Element>
					<Position X="230" Y="20" />
					<Text X="25" Y="11" Length="4" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FREQ</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="32" />
					<Rectangle Width="258" Height="187" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="252" Y="177" Font="Arial Black" FontSize="14" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,60,85,185R,200">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<ScrollY>(@g:listScroll)</ScrollY>
							<Font FontSize="12" />
							<Image Name="Vor.bmp" />
							<Image Name="Vor_Dme.bmp" />
							<Image Name="Dme.bmp" />
							<Image Name="Tacan.bmp" />
							<Image Name="VorTac.bmp" />
							<Image Name="Localizer.bmp" />
							<String>
								%((@c:NearestVorItemsNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:NearestVorCurrentLine))
										%((@g:listCurrent) l1 == (@g:listItems) 1 == and)%{if}\{blnk}%{end}%((@c:NearestVorCurrentIdent))%!s!\{nr}\t
										\{img%((@c:NearestVorCurrentType))%{case}%{:1}1%{:2}2%{:3}3%{:4}4%{:5}5%{:6}6%{end}}\t
										%((@c:NearestVorCurrentTrueBearing, degrees) (A:GPS MAGVAR, degrees) - d360)%!03d!\{dplo=M}\t
										%((@c:NearestVorCurrentDistance, nmiles))%!.1f!\{dpl=nm}\t
										%((@c:NearestVorCurrentFrequency, MHz) 100 * near d 100 div)%!03d!.\{fnt1}%(100 %)%!02d!\{fnt}\t
										%(l1 ++ s1 l2 &lt; d)
										%{if}\n%{end}
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="275" Y="37" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="169" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="169" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="169" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="173" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 169 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Nearest Airspace Page">
			<Visible>(@g:currentPageNRST) 4 == (@g:currentGroup) @kNRSTPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="11" Length="16" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>NEAREST AIRSPACE</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="32" />
					<Rectangle Width="254" Height="187" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="248" Y="177" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<ScrollY>(@g:listScroll)</ScrollY>
							<String>
								%((@c:NearestAirspaceItemsNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:NearestAirspaceCurrentLine))
										%((@g:listCurrent) l1 == (@g:listItems) 1 == and)%{if}\{blnk}%{end}%((@c:NearestAirspaceCurrentName))%!s!\{nr}\n
										\{tabs=24,244R}
										%((@c:NearestAirspaceCurrentStatus))%{case}%{:1}Within 2nm of airspace%{:2}Ahead%{:3}Ahead &lt; 2nm%{:4}Inside of airspace%{end}\t
										%(2 3 (@c:NearestAirspaceCurrentStatus) rng)%{if}
											%((@c:NearestAirspaceCurrentAheadTime, seconds) d 60 / flr)%!2d!:%(60 % flr)%!02d!
											%{end}
										<!--%((@c:NearestAirspaceCurrentNearDistance, nmiles))%!.1f!-->
										%(l1 ++ s1 l2 &lt; d)
										%{if}\n\{lsp=4}\{ladj=C}\{tabs=}\{line=240}\n%{end}
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="271" Y="37" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="169" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="169" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="169" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="173" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 169 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Active Flight Plan Page">
			<Visible>(@g:currentPageFPL) 0 == (@g:currentGroup) @kFPLPageGroup  == and</Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="10" Length="20" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>ACTIVE FLIGHT PLAN</String>
					</Text>
				</Element>
				<Element>
					<Position X="20" Y="13" />
					<Rectangle Width="26" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="1" Y="2" />
						<FormattedText X="24" Y="16" Font="Arial Black" FontSize="14" LineSpacing="16" Adjust="Center" Color="0x00FF00" Bright="Yes">
							<String>%((@c:FlightPlanIsActiveFlightPlan))%{if}00%{end}</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="51" Y="13" />
					<Rectangle Width="208" Height="20" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="2" Y="2" />
						<FormattedText X="247" Y="16" Font="Arial Black" FontSize="14" LineSpacing="16" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,85,155,215">
							<String>%((@c:FlightPlanTitle))%!s!</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="24" Y="39" />
					<Text X="60" Y="10" Length="8" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>WAYPOINT</String>
					</Text>
				</Element>
				<Element>
					<Position X="115" Y="39" />
					<Text X="25" Y="10" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>DTK</String>
					</Text>
				</Element>
				<Element>
					<Position X="179" Y="39" />
					<Text X="25" Y="10" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>DIS</String>
					</Text>
				</Element>
				<Element>
					<Position X="237" Y="39" />
					<Text X="25" Y="10" Length="3" Font="Arial Black" FontSize="10" VerticalAdjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>CUM</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="52" />
					<Rectangle Width="254" Height="169" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="248" Y="159" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,5,125R,185R,245R">
							<ScrollY>
								(@g:listScroll)
							</ScrollY>
							<BlinkCode>@BlinkerCode</BlinkCode>
							<Color Value="Cyan" />
							<String>
								%(0 sp3)
								%(@FPLEnrouteHeader)
									%{if}
										\t\{clr2}
										%((@g:listItems) (@g:listCurrent) l3 == and)%{if}\{blnk}%{end}%(l3 ++ sp3)
										Enroute\{clr}\{nr}\n
									%{end}
								%((@c:FlightPlanIsActiveFlightPlan) (@c:FlightPlanWaypointsNumber) s2 0 != and)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:FlightPlanWaypointIndex))
										%((@g:listItems) (@g:listCurrent) l3 == and)%{if}\{blnk}%{end}%(l3 ++ sp3)
										\t%((@c:FlightPlanWaypointIdent))%!s!
										\{nr}
										%(l1 0 !=)%{if}
											\t%((@c:FlightPlanWaypointMagneticHeading,degrees) d360)%!03d!\{dplo=M}
											\t%((@c:FlightPlanWaypointRemainingDistance,nmiles) s0 0 !=)%{if}%(l0)%!d!\{dpl=nm}%{end}
											\t%((@c:FlightPlanWaypointRemainingTotalDistance,nmiles) s0 0 !=)%{if}%(l0)%!d!\{dpl=nm}%{end}
										%{end}
										%(l1 ++ s1 l2 &lt;)
										\n
									%{next}
								%{end}
								%((@c:FlightPlanIsLoadedApproach))
								%{if}
									\t
									\{clr2}
										%((@g:listItems) (@g:listCurrent) l3 == and)%{if}\{blnk}%{end}%(l3 ++ sp3)
										Approach %((@c:FlightPlanApproachName))%!s!
									\{nr}\{clr}\n
									%((@c:FlightPlanApproachWaypointsNumber) s2 0 !=)
									%{if}
										%(0 sp1)
										%{loop}
											%(l1 (&gt;@c:FlightPlanWaypointApproachIndex))
											%((@g:listItems) (@g:listCurrent) l3 == and)%{if}\{blnk}%{end}%(l3 ++ sp3)
											\t
											%((@c:FlightPlanWaypointApproachType))%{case}
												%{:1}%((@c:FlightPlanWaypointApproachName))%!s!
												%{:2}proc. turn
												%{:3}proc. turn
												%{:4}dme arc
												%{:5}dme arc
												%{:6}hold
												%{:7}hold
												%{:8}%((@c:FlightPlanWaypointApproachTarget, nmiles))%!0.1f!\{dpl=nm}
												%{:9}%((E:UNITS OF MEASURE, enum) 1 &lt; if{ (@c:FlightPlanWaypointApproachTarget, feet) } els{ (@c:FlightPlanWaypointApproachTarget, meters) } )%!d!%((E:UNITS OF MEASURE, enum) 1 &lt;)%{if}\{dpl=ft}%{else}m%{end}
                %{:10}man seq
                %{:11}%((@c:FlightPlanWaypointApproachName))%!s!
                %{end}
                \{nr}
                \t%((@c:FlightPlanWaypointApproachCourse,degrees) d360)%!03d!\{dplo=M}
                \t%((@c:FlightPlanWaypointApproachRemainingDistance,nmiles) s0 0 !=)%{if}%(l0)%!d!\{dpl=nm}%{end}
                \t%((@c:FlightPlanWaypointApproachRemainingTotalDistance,nmiles) s0 0 !=)%{if}%(l0)%!d!\{dpl=nm}%{end}
                %(l1 ++ s1 l2 &lt; d)
											%{if}\n%{end}
										%{next}
									%{end}
								%{end}
							</String>
						</FormattedText>
					</Element>
					<Element>
						<Visible>
							(@c:FlightPlanIsActiveWaypoint)
						</Visible>
						<RelClip Left="1" Top="10" Width="252" Height="159" />
						<Polyline Color="0xf040f0" LineWidth="2">
							<Point X="7" Y="8" />
							<Point X="2" Y="8" />
							<Point X="2" Y="-11" />
							<Point X="6" Y="-11" />
							<Point X="6" Y="-10" />
							<Point X="3" Y="-10" />
							<Point X="3" Y="7" />
							<Point X="7" Y="7" />
							<Point X="5" Y="10" />
							<Point X="5" Y="5" />
							<Point X="7" Y="8" />
						</Polyline>
						<Shift>
							<Value>
								@FPLLineIndex
								17 * (@g:listScroll) - 5 +
							</Value>
							<Scale Y="1" />
						</Shift>
					</Element>
				</Element>
				<Element>
					<Position X="271" Y="57" />
					<Visible>(@g:listScrollbarVisible)</Visible>
					<Element>
						<Visible>(@g:listScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="151" Color="Cyan" Bright="yes" />
						<Element>
							<Rectangle Width="4" Height="151" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:listScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:listScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0" Bottom="151" />
						</Element>
					</Element>
					<Element>
						<Position X="0" Y="155" />
						<Visible>(@g:listScrollbarOffset) (@g:listScrollbarLength) + 151 &lt;</Visible>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="Procedures Page">
			<Visible>(@g:currentGroup) @kPROCPageGroup == </Visible>
			<Position X="56" Y="0" />
			<Element>
				<Rectangle Width="280" Height="230" LineWidth="0" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="0" Y="0" />
					<Text X="280" Y="10" Length="16" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>PROCEDURES</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="22" />
					<Rectangle Width="253" Height="115" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="247" Y="105" Font="Arial Black" FontSize="16" LineSpacing="20" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,85,155,215">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<Color Value="0x007F00" />
							<String>
								%((@g:blinkingField) 1 == )%{if}\{blnk}%{else}%((@g:blinkingFieldEnabled1) 0 == )%{if}\{clr2}%{end}%{end}Activate Vectors-To-Final?\{clr}\{nr}\n
								%((@g:blinkingField) 2 == )%{if}\{blnk}%{else}%((@g:blinkingFieldEnabled2) 0 == )%{if}\{clr2}%{end}%{end}Activate Approach?\{clr}\{nr}\n
								%((@g:blinkingField) 3 == )%{if}\{blnk}%{else}%((@g:blinkingFieldEnabled3) 0 == )%{if}\{clr2}%{end}%{end}Select Approach?\{clr}\{nr}\n
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="0" Y="148" />
					<Text X="280" Y="10" Length="20" Font="Arial Black" FontSize="10" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>LOADED PROCEDURES</String>
					</Text>
				</Element>
				<Element>
					<Position X="16" Y="160" />
					<Rectangle Width="253" Height="60" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="5" />
						<FormattedText X="150" Y="45" Font="Arial Black" FontSize="10" LineSpacing="15" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,35">
							<Color Value="Cyan" />
							<String>
							\{clr2}APR\{clr}\t%((@c:FlightPlanIsLoadedApproach))%{if}%((@c:FlightPlanApproachAirportIdent))%!s! - %((@c:FlightPlanApproachName))%!s!%{else}_ _ _ _ -%{end}\n
							\{clr2}ARVL\{clr}\t_ _ _ _ -\n
							\{clr2}DEP\{clr}\t_ _ _ _ -
							</String>
						</FormattedText>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="WPTMap">
			<Visible>(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 1 == (@g:currentPageWPT) 3 == || and</Visible>
			<Position X="66" Y="30" />
			<CustomDraw Name="fs9gps:map" X="180" Y="190" LayerTerrain="Yes" LayerAirports="Yes" Bright="Yes" CenterX="90" CenterY="95" TrackUp="No">
				<Zoom>(@g:smallmap_ZoomFactor) 1852.0 *</Zoom>
				<Latitude>
					(@g:currentPageWPT) 1 == if{
						(@g:currentAirportRunway) (&gt;@c:WaypointAirportCurrentRunway)
						(@c:WaypointAirportRunwayLatitude, Radians) quit }						
					(@g:currentPageWPT) 3 == if{
						(@g:currentAirportApproach) (&gt;@c:WaypointAirportCurrentApproach)
						(@g:currentAirportTransition) (&gt;@c:WaypointAirportApproachCurrentTransition)
						(@c:WaypointAirportApproachTransitionLatitude, Radians) quit }						
				</Latitude>
				<Longitude>
					(@g:currentPageWPT) 1 == if{
						(@g:currentAirportRunway) (&gt;@c:WaypointAirportCurrentRunway)
						(@c:WaypointAirportRunwayLongitude, Radians) quit }						
					(@g:currentPageWPT) 3 == if{
						(@g:currentAirportApproach) (&gt;@c:WaypointAirportCurrentApproach)
						(@g:currentAirportTransition) (&gt;@c:WaypointAirportApproachCurrentTransition)
						(@c:WaypointAirportApproachTransitionLongitude, Radians) quit }						
				</Longitude>
				<DetailLayerTerrain>(@g:setup_ColorTerrain) 0 == if{ 1 } els{ 2 }</DetailLayerTerrain>
				<DetailLayerAirports>5</DetailLayerAirports>
				<LayerIntersections>(@g:currentPageWPT) 3 ==</LayerIntersections>
				<DetailLayerIntersections>(@g:smallmap_ZoomFactor) 15 &gt; if{ -1 } els{ 2 }</DetailLayerIntersections>
				<LayerApproach>(@g:currentPageWPT) 3 ==</LayerApproach>
				<LayerApproachAirport>(@c:WaypointAirportICAO)</LayerApproachAirport>
				<LayerApproachApproach>(@c:WaypointAirportCurrentApproach)</LayerApproachApproach>
				<LayerApproachTransition>(@c:WaypointAirportApproachCurrentTransition)</LayerApproachTransition>
			</CustomDraw>
			<Element>
				<Rectangle Width="181" Height="191" LineWidth="1" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>
					(@g:currentPageWPT) 1 == (@g:currentAirportRunway) (@c:WaypointAirportRunwaysNumber) &lt; and
					(@g:currentPageWPT) 3 == (@g:currentAirportApproach) (@c:WaypointAirportApproachesNumber) &lt; and
						||
				</Visible>
				<Position X="10" Y="160" />
				<FormattedText X="36" Y="12" Font="Arial Black" FontSize="11" Adjust="Center" VerticalAdjust="Bottom" Color="0xF0D0D0" Bright="Yes">
					<String>%((@g:smallmap_ZoomFactor) s0 5 &gt;=)%{if}%(l0)%!d!\{dpl=nm}%{else}%(l0 1 &gt;=)%{if}%(l0)%!.1f!\{dpl=nm}%{else}%(l0 6076 *)%!d!\{dpl=ft}%{end}%{end}</String>
				</FormattedText>
			</Element>
		</Element>
		<Element>
			<Position X="15" Y="231" />
			<FormattedText X="40" Y="16" Font="Arial Black" FontSize="13" Adjust="Left" Color="Yellow" Bright="Yes">
				<String>%((@g:modeCDI))%{case}%{:1}ENR%{:2}TERM%{:3}APR%{end}</String>
			</FormattedText>
		</Element>
		<Element>
			<Position X="65" Y="231" />
			<FormattedText X="40" Y="16" Font="Arial Black" FontSize="13" Adjust="Left" Color="Yellow" Bright="Yes">
				<String>%((@c:FlightPlanIsActiveWaypointLocked))%{if}SUSP%{end}</String>
			</FormattedText>
		</Element>
		<Element>
			<Position X="115" Y="231" />
			<FormattedText X="40" Y="16" Font="Arial Black" FontSize="13" Adjust="Left" Color="Yellow" Bright="Yes">
				<String>%((@g:messagesOff))%{if}OFF%{else}%((@c:MessageItemsNumber) 0 &gt;)%{if}%((@c:NewMessagesNumber) 0 &gt;)%{if}\{blnk}%{end}MSG\{nr}%{end}%{end}</String>
			</FormattedText>
		</Element>
		<Element>
			<Position X="0" Y="231" />
			<HorizontalLine Length="336" Color="Cyan" LineWidth="1" Bright="Yes" />
		</Element>
		<Element>
			<Position X="160" Y="231" />
			<VerticalLine Color="Cyan" LineWidth="1" Bright="Yes" Length="17" />
		</Element>
		<Element Name="NavBar">
			<Position X="161" Y="232" />
			<Rectangle Height="16" Width="175" FillColor="#2A76E8" Bright="Yes" />
			<!-- NAV BAR -->
			<Element>
				<Visible></Visible>
				<Position X="3" Y="0" />
				<FormattedText X="50" Y="15" Font="Arial Black" FontSize="13" LineSpacing="15" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Bright="Yes">
					<String>
						%((@g:currentGroup) @kNAVPageGroup ==)%{if}NAV%{end}
						%((@g:currentGroup) @kWPTPageGroup ==)%{if}WPT%{end}
						%((@g:currentGroup) @kNRSTPageGroup ==)%{if}NRST%{end}
						%((@g:currentGroup) @kFPLPageGroup ==)%{if}FPL%{end}
						%((@g:currentGroup) @kPROCPageGroup ==)%{if}PROC%{end}
					</String>
				</FormattedText>
			</Element>
			<!-- Page Select Rects -->
			<Macro Name="PageSelected">(@g:currentPageFPL) (@g:currentPageNRST) (@g:currentPageWPT) (@g:currentPageNAV) 4 (@g:currentGroup) case @1 ==</Macro>
			<Macro Name="PageSelectedVisible">@PageSelected(@1) @NumberOfPagesInCurrentGroup @1 &gt; and</Macro>
			<Macro Name="PageNotSelectedVisible">@PageSelected(@1) ! @NumberOfPagesInCurrentGroup @1 &gt; and</Macro>
			<Element>
				<Visible>@PageNotSelectedVisible(0)</Visible>
				<Position X="55" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(0)</Visible>
				<Position X="55" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(1)</Visible>
				<Position X="63" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(1)</Visible>
				<Position X="63" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(2)</Visible>
				<Position X="71" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(2)</Visible>
				<Position X="71" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(3)</Visible>
				<Position X="78" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(3)</Visible>
				<Position X="78" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(4)</Visible>
				<Position X="86" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(4)</Visible>
				<Position X="86" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(5)</Visible>
				<Position X="94" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(5)</Visible>
				<Position X="94" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(6)</Visible>
				<Position X="102" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(6)</Visible>
				<Position X="102" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(7)</Visible>
				<Position X="110" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(7)</Visible>
				<Position X="110" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(8)</Visible>
				<Position X="118" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(8)</Visible>
				<Position X="118" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageNotSelectedVisible(9)</Visible>
				<Position X="126" Y="2" />
				<Rectangle Height="11" Width="6" Color="Cyan" Bright="Yes" />
			</Element>
			<Element>
				<Visible>@PageSelectedVisible(9)</Visible>
				<Position X="126" Y="2" />
				<Rectangle Height="11" Width="6" FillColor="0xF0D0D0" Bright="Yes" />
			</Element>
			<!-- /NAV BAR -->
		</Element>
		<Element>
			<Visible>(@g:popupMenu) 0 != (@g:popupMenu) @kPopupMenuSelectApproach != and (@g:popupMenu) @kPopupMenuSelectTransition != and (@g:directTo) @kOn == || (@g:activateLeg) @kOn == || (@g:messagePopup) @kOff == and</Visible>
			<Element>
				<Position X="55" Y="0" />
				<Rectangle Width="280" Height="230" FillColor="Black" Transparency="0.5" Bright="Yes" />
			</Element>
		</Element>
		<Element Name="NoOptionMenu">
			<Visible>(@g:noOptionMenu) @kOn ==</Visible>
			<Position X="100" Y="94" />
			<Rectangle Width="178" Height="83" LineWidth="1" FillColor="Blue" Bright="Yes" />
			<Element Name="Title">
				<Position X="0" Y="0" />
				<Text X="178" Y="16" Length="16" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
					<String>PAGE MENU</String>
				</Text>
			</Element>
			<Element Name="NoOptions">
				<Position X="0" Y="42" />
				<FormattedText X="174" Y="17" Font="Arial Black" FontSize="16" LineSpacing="17" Adjust="Center" Color="0xC0C0C0" Bright="Yes">
					<String>(No Options)</String>
				</FormattedText>
			</Element>
		</Element>
		<Element Name="ActivateLegPopup">
			<Visible>(@g:activateLeg) @kOn ==</Visible>
			<Position X="92" Y="94" />
			<Rectangle Width="194" Height="83" LineWidth="1" FillColor="Blue" Bright="Yes" />
			<Element Name="Title">
				<Position X="0" Y="0" />
				<Text X="194" Y="16" Length="16" Font="Arial Black" FontSize="8" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
					<String>ACTIVATE LEG</String>
				</Text>
			</Element>
			<Element Name="Inner Rect">
				<Position X="10" Y="18" />
				<Rectangle Width="174" Height="44" LineWidth="1" FillColor="Black" Bright="Yes" />
				<Element Name="Fly Leg">
					<Position X="0" Y="0" />
					<Text X="174" Y="20" Length="12" Font="Arial Black" FontSize="12" Adjust="Center" Color="0x00FF00" Bright="Yes">
						<String>Fly Leg</String>
					</Text>
				</Element>
				<Element Name="WPTs">
					<Position X="2" Y="20" />
					<FormattedText X="170" Y="20" Font="Arial Black" FontSize="12" LineSpacing="14" Color="0x00FF00" Tabs="40C,85C,130C" Bright="Yes">
						<Image Name="course_to.bmp" />
						<String>%(@FPLPrevLegName((@g:directToActivateLeg)))%!s!\t\{img1}\t%(@FPLLegName((@g:directToActivateLeg)))%!s!</String>
					</FormattedText>
				</Element>
			</Element>
			<Element Name="Activate?">
				<Position X="0" Y="63" />
				<FormattedText X="190" Y="17" Font="Arial Black" FontSize="16" LineSpacing="17" Adjust="Right" Color="White" Bright="Yes">
					<BlinkCode>@BlinkerCode</BlinkCode>
					<String>\{blnk}Activate?\{nr}</String>
				</FormattedText>
			</Element>
		</Element>
		<Element Name="Direct To Popup">
			<Visible>(@g:directTo) 1 ==</Visible>
			<Position X="70" Y="7" />
			<Element>
				<Rectangle Width="253" Height="216" LineWidth="1" Color="White" FillColor="Blue" Bright="Yes" />
				<Element>
					<Position X="58" Y="7" />
					<Text X="150" Y="14" Length="22" Font="Arial Black" FontSize="12" Color="White" Multiline="No" Bright="Yes">
						<String>SELECT D&gt; WAYPOINT</String>
					</Text>
				</Element>
				<Element>
					<Position X="10" Y="23" />
					<Rectangle Width="230" Height="1" LineWidth="1" Color="0x00FF00" Bright="Yes" />
				</Element>
				<Element>
					<Position X="17" Y="27" />
					<Text X="150" Y="12" Length="30" Font="Arial Black" FontSize="10" Color="Cyan" Multiline="No" Bright="Yes">
						<String>IDENT, FACILITY &amp; CITY</String>
					</Text>
				</Element>
				<Element>
					<Position X="11" Y="41" />
					<Rectangle Width="228" Height="56" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="6" Y="2" />
						<FormattedText X="216" Y="51" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="0,70,100">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<Image Name="Airport_Hard_NE_SW.bmp" />
							<Image Name="Intersection.bmp" />
							<Image Name="Ndb.bmp" />
							<Image Name="Vor.bmp" />
							<Image Name="Marker.bmp" />
							<String>
								%((@g:enteringInput) 31 == (@g:popupMenu) 0 == and)
								%{if}
									%((@c:IcaoSearchCurrentIdent) slen sp1 0 sp0)
									%{loop}
										%((@c:IcaoSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:IcaoSearchCurrentIdent) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
										%(l0 ++ s0 l1 &lt;=)
									%{next}
								%{else}
									%((@g:blinkingField) 1 ==)%{if}\{blnk}%{end}%((@c:FacilityIdent) d slen 0 ==)%{if}_ _ _ _ _%{else}%!s!%{end}\{nr}
								%{end}
								\t\{img%('AWNVM' (@c:FacilityCode) ord schr ++)%!d!}
								\t%((@c:FacilityRegion))%!s!\n
								%((@g:enteringInput) 131 == (@g:popupMenu) 0 == and)
								%{if}
									%((@c:NameSearchCurrentName) slen sp1 0 sp0)
									%{loop}
										%((@c:NameSearchCursorPosition) l0 ==)%{if}\{blnk}%{end}%((@c:NameSearchCurrentName) l0 symb d slen 0 == if{ p '  ' })%!s!\{nr}
										%(l0 ++ s0 l1 &lt;=)
									%{next}
								%{else}
									%((@g:blinkingField) 2 ==)%{if}\{blnk}%((@c:FacilityName) d slen 0 ==)%{if}_ _ _ _ _ _ _ _ _ _%{else}%!s!%{end}\{nr}%{else}%((@c:FacilityName))%!s!%{end}
								%{end}\n
								%((@c:FacilityCity))%!s!
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="17" Y="105" />
					<Rectangle Width="216" Height="1" LineWidth="1" Color="Cyan" Bright="Yes" />
				</Element>
				<Element>
					<Position X="14" Y="117" />
					<Text X="40" Y="12" Length="30" Font="Arial Black" FontSize="10" Color="Cyan" Multiline="No" Bright="Yes">
						<String>FPL</String>
					</Text>
				</Element>
				<Element>
					<Position X="41" Y="114" />
					<Rectangle Width="73" Height="21" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="4" Y="2" />
						<FormattedText X="60" Y="17" Font="Arial Black" FontSize="16" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:blinkingField) 3 ==)%{if}\{blnk}%{end}
								%((@c:FlightPlanIsActiveFlightPlan))%{if}%(0 (&gt;@c:FlightPlanWaypointIndex) (@c:FlightPlanWaypointIdent) d slen 0 == if{ p '_ _ _ _ _' })%!s!%{end}
								\{nr}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="132" Y="117" />
					<Text X="50" Y="12" Length="30" Font="Arial Black" FontSize="10" Color="Cyan" Multiline="No" Bright="Yes">
						<String>NRST</String>
					</Text>
				</Element>
				<Element>
					<Position X="165" Y="114" />
					<Rectangle Width="74" Height="21" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="4" Y="2" />
						<FormattedText X="60" Y="17" Font="Arial Black" FontSize="16" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<BlinkCode>@BlinkerCode</BlinkCode>
							<String>
								%((@g:blinkingField) 4 ==)%{if}\{blnk}%{end}
								%(0 (&gt;@c:NearestAirportCurrentLine) (@c:NearestAirportCurrentIdent))%!s!
								\{nr}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="17" Y="144" />
					<Rectangle Width="216" Height="1" LineWidth="1" Color="Cyan" Bright="Yes" />
				</Element>
				<Element>
					<Position X="16" Y="151" />
					<Text X="60" Y="12" Length="9" Font="Arial Black" FontSize="10" Color="Cyan" Multiline="No" Bright="Yes">
						<String>POSITION</String>
					</Text>
				</Element>
				<Element>
					<Position X="11" Y="165" />
					<Rectangle Width="123" Height="36" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="8" Y="1" />
						<FormattedText X="97" Y="34" Font="Arial Black" FontSize="14" VerticalAdjust="Top" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes" Tabs="18R,49R,49">
							<String>
								%((@c:FacilityValid))
								%{if}
									@FormatLatitudeTabbed(@c:FacilityLatitude)\n
									@FormatLongitudeTabbed(@c:FacilityLongitude)
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="170" Y="151" />
					<Text X="23" Y="12" Length="4" Font="Arial Black" FontSize="10" Color="Cyan" Multiline="No" Bright="Yes">
						<String>CRS</String>
					</Text>
				</Element>
				<Element>
					<Position X="165" Y="165" />
					<Rectangle Width="74" Height="22" LineWidth="1" Color="Cyan" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="20" Y="2" />
						<FormattedText X="60" Y="18" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<String>
									%((@c:FacilityValid))
									%{if}
										%(
											(A:GPS POSITION LAT, degrees) (&gt;@c:GeoCalcLatitude1, degrees) (A:GPS POSITION LON, degrees) (&gt;@c:GeoCalcLongitude1, degrees) 
											(@c:FacilityLatitude, degrees) (&gt;@c:GeoCalcLatitude2, degrees) (@c:FacilityLongitude, degrees) (&gt;@c:GeoCalcLongitude2, degrees) 
											(@c:GeoCalcBearing, degrees) (A:GPS MAGVAR, degrees) - d360
										)%!03d!\{dplo=M}
									%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element>
					<Position X="170" Y="195" />
					<FormattedText X="70" Y="16" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="White" Bright="Yes">
						<BlinkCode>@BlinkerCode</BlinkCode>
						<String>%((@c:FacilityValid))%{if}%((@g:blinkingField) 5 ==)%{if}\{blnk}%{end}Activate?\{nr}%{end}</String>
					</FormattedText>
				</Element>
			</Element>
		</Element>
		<Element Name="PopupMenu">
			<Visible>(@g:popupMenu) 0 !=</Visible>
			<Element>
				<Shift>
					<Value>(@g:popupMenuY)</Value>
					<Scale Y="1" />
				</Shift>
				<Shift>
					<Value>(@g:popupMenuX)</Value>
					<Scale X="1" />
				</Shift>
				<Rectangle Width="280" Height="230" Color="0xF0D0D0" FillColor="Blue" LineWidth="1" Bright="Yes">
					<HeightCode>(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) min 4 +</HeightCode>
					<WidthCode>(@g:popupMenuWidth) 8 +</WidthCode>
				</Rectangle>
				<Element>
					<Position X="2" Y="1" />
					<RelClip>
						<HeightCode>(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) min</HeightCode>
						<WidthCode>(@g:popupMenuWidth)</WidthCode>
					</RelClip>
					<FormattedText X="277" Y="222" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0xF0D0D0" Bright="Yes">
						<Font FontSize="10" />
						<Color Value="Cyan" />
						<BlinkCode>@BlinkerCode</BlinkCode>
						<ScrollY>(@g:popupMenuScroll)</ScrollY>
						<String>
							\{rmrg=%((@g:popupMenuWidth))%!d!}
							%((@g:popupMenu) 1 ==)%{if}
								\{lsp=14}\{ladj=C}\{clr2}\{fnt1}RUNWAY\{fnt}\n
								\{lsp=5}\{ladj=C}\{line=95}\{clr}
								%((@c:WaypointAirportRunwaysNumber) s2 0 &gt;)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:WaypointAirportCurrentRunway))
										\n
										%((@g:popupMenuCurrent) l1 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportRunwayDesignation))%!s!\{nr}
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							%{end}
							%((@g:popupMenu) 2 ==)%{if}
								\{lsp=14}\{ladj=C}\{clr2}\{fnt1}APPROACH\{fnt}\n
								\{lsp=5}\{ladj=C}\{line=95}\{clr}
								%((@g:popupMenuMaxElements) s2 0 &gt;)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:WaypointAirportCurrentApproach))
										\n
										%((@g:popupMenuCurrent) l1 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportApproachName))%!s!%((@c:WaypointAirportApproachGps))%{if}\{dpl=GPS}%{end}\{nr}
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							%{end}
							%((@g:popupMenu) 3 ==)%{if}
								\{lsp=14}\{ladj=C}\{clr2}\{fnt1}TRANS\{fnt}\n
								\{lsp=5}\{ladj=C}\{line=95}\{clr}
								%((@g:currentAirportApproach) (&gt;@c:WaypointAirportCurrentApproach) (@g:popupMenuMaxElements) s2 0 &gt;)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:WaypointAirportApproachCurrentTransition))
										\n
										%((@g:popupMenuCurrent) l1 ==)%{if}\{blnk}%{end}%((@c:WaypointAirportApproachTransitionName))%!s!%{end}\{nr}
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							%{end}
							%((@g:popupMenu) 10 ==)%{if}
								\{lsp=14}\{ladj=C}\{clr2}\{fnt1}DUPLICATE WAYPOINTS\{fnt}\n
								\{lsp=5}\{ladj=C}\{line=140}\{clr}\n
								\{clr2}\{fnt1}WPT  \{fnt}\{clr}%((@c:IcaoSearchCurrentIdent))%!s!
								%((@g:popupMenuMaxElements) s2 0 &gt;)
								%{if}
									%(0 sp1)
									%{loop}
										%((@g:popupMenu) 10 == if{ l1 (&gt;@c:IcaoSearchMatchedIcao) })
										\n
										%((@g:popupMenuCurrent) l1 ==)%{if}\{blnk}%{end}
										%('AWNVM' (@c:IcaoSearchCurrentIcaoType) ord schr)%{case}%{:0}AIRPORT%{:1}INTERSECTION%{:2}NDB%{:3}VOR%{:4}MARKER%{end}\n
										%((@c:IcaoSearchCurrentIcaoRegion))%!s!\{nr}
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							%{end}
							%((@g:popupMenu) 62 ==)%{if}
								\{lsp=14}\{ladj=C}\{clr2}\{fnt1}FPL\{fnt}\n
								\{lsp=5}\{ladj=C}\{line=90}\{clr}
								%((@g:popupMenuMaxElements) s2 0 &gt;)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:FlightPlanWaypointIndex))
										\n
										%((@g:popupMenuCurrent) l1 ==)%{if}\{blnk}%{end}%((@c:FlightPlanWaypointIdent))%!s!\{nr}
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							%{end}
							%((@g:popupMenu) 63 ==)%{if}
								\{lsp=14}\{ladj=C}\{clr2}\{fnt1}NEAREST\{fnt}\n
								\{lsp=5}\{ladj=C}\{line=90}\{clr}
								%((@g:popupMenuMaxElements) s2 0 &gt;)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:NearestAirportCurrentLine))
										\n
										%((@g:popupMenuCurrent) l1 ==)%{if}\{blnk}%{end}%((@c:NearestAirportCurrentIdent))%!s!\{nr}
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							%{end}
						</String>
					</FormattedText>
				</Element>
				<Element>
					<Position X="0" Y="2" />
					<Visible>(@g:popupMenuScrollbarVisible)</Visible>
					<Shift>
						<Value>(@g:popupMenuWidth) ++</Value>
						<Scale X="1" />
					</Shift>
					<Element>
						<Visible>(@g:popupMenuScrollbarOffset) 0 &gt;</Visible>
						<Position X="0" Y="0" />
						<Polygon Color="Cyan" Bright="yes">
							<Point X="2" Y="0" />
							<Point X="4" Y="3" />
							<Point X="0" Y="3" />
						</Polygon>
					</Element>
					<Element>
						<Position X="0" Y="4" />
						<Rectangle Width="4" Height="214" Color="Cyan" Bright="yes">
							<HeightCode>(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) min 8 -</HeightCode>
						</Rectangle>
						<Element>
							<Rectangle Width="4" Height="214" FillColor="Cyan" Bright="yes">
								<HeightCode>(@g:popupMenuScrollbarLength)</HeightCode>
							</Rectangle>
							<Shift>
								<Value>(@g:popupMenuScrollbarOffset)</Value>
								<Scale Y="1" />
							</Shift>
							<RelClip Top="0">
								<HeightCode>(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) min 8 -</HeightCode>
							</RelClip>
						</Element>
					</Element>
					<Element>
						<Visible>(@g:popupMenuScrollbarOffset) (@g:popupMenuScrollbarLength) +  (@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) min 8 - &lt;</Visible>
						<Shift>
							<Value>(@g:popupMenuHeaderHeight) (@g:popupMenuMaxElements) (@g:popupMenuLineHeight) 17 * * + (@g:popupMenuHeight) min 4 -</Value>
							<Scale Y="1" />
						</Shift>
						<Polygon Color="Cyan" Bright="yes">
							<Point X="0" Y="0" />
							<Point X="4" Y="0" />
							<Point X="2" Y="3" />
						</Polygon>
					</Element>
				</Element>
			</Element>
		</Element>
		<Element Name="MSGPopup">
			<Visible>(@g:messagePopup) @kOn ==</Visible>
			<Position X="55" Y="0" />
			<Rectangle Width="280" Height="230" FillColor="Black" Transparency="0.5" Bright="Yes" />
			<Element>
				<Position X="25" Y="26" />
				<Rectangle Width="230" Height="196" LineWidth="1" FillColor="Blue" Bright="Yes" />
				<Element Name="Title">
					<Position X="0" Y="0" />
					<Text X="230" Y="16" Length="16" Font="Arial Black" FontSize="9" Adjust="Center" VerticalAdjust="Center" Color="White" Multiline="No" Bright="Yes">
						<String>MESSAGE</String>
					</Text>
				</Element>
				<Element>
					<Position X="10" Y="18" />
					<Rectangle Width="210" Height="160" LineWidth="1" FillColor="Black" Bright="Yes" />
					<Element>
						<Position X="3" Y="3" />
						<FormattedText X="204" Y="154" Font="Arial Black" FontSize="14" LineSpacing="17" Adjust="Left" Color="0x00FF00" Bright="Yes">
							<String>
								%((@c:MessageItemsNumber) s2 0 !=)
								%{if}
									%(0 sp1)
									%{loop}
										%(l1 (&gt;@c:MessageCurrentLine))
										%((@c:MessageCurrentType))%{case}
											%{:1}Near Airspace --\n   less than 2nm
											%{:2}Airspace ahead --\n   less than 10 minutes
											%{:3}Airspace near and ahead
											%{:4}Inside Airspace
											%{end}
										\n\n
										%(l1 ++ s1 l2 &lt;)
									%{next}
								%{end}
							</String>
						</FormattedText>
					</Element>
				</Element>
				<Element Name="Msg button?">
					<Position X="0" Y="178" />
					<Text X="230" Y="18" Length="38" Font="Arial Black" FontSize="14" Adjust="Center" Color="Cyan" Multiline="No" Bright="Yes">
						<String>Press MSG to continue</String>
					</Text>
				</Element>
			</Element>
		</Element>
	</Element>
	<Mouse Name="MouseRoutines">
		<!-- NRST Button -->
    <Macro Name="PowerOn">(A:PARTIAL PANEL ELECTRICAL, bool) (A:PARTIAL PANEL AVIONICS, bool) or not</Macro>
		<Macro Name="NRSTButton">@PowerOn if{ @EscapeMenu @kNRSTPageGroup (&gt;@g:currentGroup) @PageInit }</Macro>
		<Area Name="NRST Button" Left="48" Top="313" Width="34" Height="21">
			<Click Kind="LeftSingle">
				1 (&gt;@g:nrstButtonDown) @NRSTButton
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_NRST_BUTTON" />
		</Area>
		<!-- OBS Button -->
		<Macro Name="OBSButton">@PowerOn if{ @EscapeMenu (@c:FlightPlanIsActiveWaypointLocked) ! (&gt;@c:FlightPlanIsActiveWaypointLocked) }</Macro>
    <Area Name="OBS Button" Left="103" Top="313" Width="34" Height="21">
      <Click Kind="LeftSingle">
        1 (&gt;@g:obsButtonDown) @OBSButton
      </Click>
      <Cursor Type="Hand" />
      <Tooltip ID="TOOLTIPTEXT_GPS_OBS_BUTTON" />
    </Area>
		<!-- MSG Button -->
		<Macro Name="MSGButton">@PowerOn if{ (@g:messagePopup) @kOff == if{ @kOn (&gt;@g:messagePopup) 1 (&gt;@c:NewMessagesConfirm) } els{ @kOff (&gt;@g:messagePopup) } }</Macro>
    <Area Name="MSG Button" Left="157" Top="313" Width="34" Height="21">
      <Click Kind="LeftSingle">
        1 (&gt;@g:msgButtonDown) @MSGButton
      </Click>
      <Cursor Type="Hand" />
      <Tooltip ID="TOOLTIPTEXT_GPS_MSG_BUTTON" />
    </Area>
		<!-- FPL Button -->
		<Macro Name="FPLButton">@PowerOn if{ @EscapeMenu (@g:currentGroup) @kFPLPageGroup == if{ @kNAVPageGroup (&gt;@g:currentGroup) } els{ @kFPLPageGroup (&gt;@g:currentGroup) } @PageInit }</Macro>
		<Area Name="FPL Button" Left="211" Top="313" Width="34" Height="21">
			<Click Kind="LeftSingle">
				1 (&gt;@g:fplButtonDown) @FPLButton 
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_FPL_BUTTON" />
		</Area>
		<!-- TERR Button -->
		<Macro Name="TerrainButton">@PowerOn if{ @EscapeMenu (@g:setup_ColorTerrain) ! (&gt;@g:setup_ColorTerrain) }</Macro>
		<Area Name="TERR Button" Left="264" Top="313" Width="34" Height="21">
			<Click Kind="LeftSingle">
				1 (&gt;@g:terrButtonDown) @TerrainButton
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_TERR_BUTTON" />
		</Area>
		<!-- PROC Button -->
		<Macro Name="PROCButton">@PowerOn if{ @EscapeMenu (@g:currentGroup) @kPROCPageGroup == if{ @kNAVPageGroup (&gt;@g:currentGroup) } els{ @kPROCPageGroup (&gt;@g:currentGroup) } @ProcedurePageInit }</Macro>
		<Area Name="PROC Button" Left="319" Top="313" Width="34" Height="21">
			<Click Kind="LeftSingle">
				1 (&gt;@g:procButtonDown) @PROCButton				
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_PROC_BUTTON" />
		</Area>
		<!-- MENU Button -->
		<Macro Name="MENUButton">@PowerOn ! if{ quit }
			(@g:activateLeg) @kOn == (@g:noOptionMenu) @kOn == or if{
				@EscapeMenu
				quit
			}
			(@g:activateLeg) @kOff == (@g:currentGroup) @kFPLPageGroup == and (@g:listItems) 0 != and @FPLLegalLeg((@g:listCurrent)) and if{ 
				(@g:listCurrent) (&gt;@g:directToActivateLeg) @EscapeMenu @kOn (&gt;@g:activateLeg) 1 (&gt;@g:numberOfBlinkingFields) @InitBlinker 
			} els{
				@EscapeMenu @kOn (&gt;@g:noOptionMenu)
			}
		</Macro>
    <Area Name="MENU Button" Left="405" Top="163" Width="34" Height="21">
      <Click Kind="LeftSingle">
        1 (&gt;@g:menuButtonDown) @MENUButton
      </Click>
      <Cursor Type="Hand" />
      <Tooltip ID="TOOLTIPTEXT_GPS_MENU_BUTTON" />
    </Area>
		<!-- CLR/QUIT Button -->
		<Macro Name="CLRButton">
      @PowerOn ! if{ quit }
      @InitBlinker

      <!-- if message popup on screen, close and quit -->
			(@g:messagePopup) @kOn == if{
				@kOff (&gt;@g:messagePopup)
				quit
			}

			(@g:noOptionMenu) 0 != if{
				0 (&gt;@g:noOptionMenu)
				quit
			}
			(@g:popupMenu) 0 != if{
				@CancelPopupMenu
				quit
			}
			(@g:enteringInput) 0 != if{
				@CancelInput
				quit
			}
			(@g:activateLeg) 0 != if{
				0 (&gt;@g:activateLeg)
				quit
			}
			(@g:directTo) 0 != if{
				0 (&gt;@g:directTo)
				quit
			}
			(@g:blinkingField) 0 != (@g:listItems) 0 != || if{
				0 (&gt;@g:blinkingField)
				0 (&gt;@g:listItems)
				quit
			}
			
			<!-- if waypoint selected on FPL screen, delete waypoint -->
			(@g:currentGroup) @kFPLPageGroup == (@g:listCurrent) 0 &gt; and if{
				quit
			}
				
			<!-- if navmap (either one) is displayed, declutter -->
			(@g:currentGroup) @kNAVPageGroup == if{
				(@g:currentPageNAV) 0 == if{
					0 2 (@g:navPage0DetailLevel) rng if{ (@g:navPage0DetailLevel) ++ (&gt;@g:navPage0DetailLevel) } els{ 0 (&gt;@g:navPage0DetailLevel) }
					quit
				}

				(@g:currentPageNAV) 1 == if{
					0 2 (@g:navPage1DetailLevel) rng if{ (@g:navPage1DetailLevel) ++ (&gt;@g:navPage1DetailLevel) } els{ 0 (&gt;@g:navPage1DetailLevel) }
					quit
				}
			}
			@EscapeMenu
			(@g:currentGroup) @kPROCPageGroup == if{ @kNAVPageGroup (&gt;@g:currentGroup) @PageInit }
		</Macro>
		<Area Name="CLR/QUIT Button" Left="405" Top="198" Width="34" Height="21">
			<Click Kind="LeftSingle+Leave">
				(M:Event) 'LeftSingle' scmp 0 == if{ (@g:clrButtonDown) 0 == if{ 1 (&gt;@g:clrButtonDown) 0 (&gt;@g:clrButtonCount) } }
				(M:Event) 'Leave' scmp 0 == if{ (@g:clrButtonDown) 1 == if{ 0 (&gt;@g:clrButtonDown) (@g:clrButtonCount) @CLRButtonDelay &lt; if{ @CLRButton } } }
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_CLR_BUTTON" />
		</Area>
		<!-- ENT Button -->
		<Macro Name="ENTButton">
      @PowerOn ! if{ quit }
      @RecalcSmallZoom
      (@g:activateLeg) @kOn == if{
      @FPLActivateLeg((@g:directToActivateLeg))
      @EscapeMenu
      quit
      }
      (@g:noOptionMenu) @kOn == if{
      @EscapeMenu
      quit
      }
      (@g:popupMenu) 0 != (@g:popupMenuCurrent) 0 &lt; and if{ @CancelPopupMenu quit }
				(@g:popupMenu) 1 == if{ (@g:popupMenuCurrent) (&gt;@g:currentAirportRunway) @CancelPopupMenu quit }
				(@g:popupMenu) @kPopupMenuSelectApproach == if{ (@g:popupMenuCurrent) (&gt;@g:currentAirportApproach) @CancelPopupMenu @RestoreBlinkingField 3 (&gt;@g:blinkingField) @InvokePopupSelectTransition quit }
				(@g:popupMenu) @kPopupMenuSelectTransition == if{ (@g:popupMenuCurrent) (&gt;@g:currentAirportTransition) @CancelPopupMenu @RestoreBlinkingField 4 (&gt;@g:blinkingField) quit }
				(@g:popupMenu) 10 == if{ 
					(@g:popupMenuCurrent) (&gt;@c:IcaoSearchMatchedIcao) @CancelPopupMenu 
					(@g:enteringInputSaved) sp0
					:101
					l0 10 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointAirportICAO) }
					l0 11 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointIntersectionICAO) }
					l0 12 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointNdbICAO) }
					l0 13 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:WaypointVorICAO) }
					l0 31 == if{ (@c:IcaoSearchCurrentIcao) (&gt;@c:FacilityICAO) 5 (&gt;@g:blinkingField) }
					quit 
				}
				(@g:popupMenu) 62 == if{
					:162
					0 (&gt;@g:directToActivateLeg)
					(@g:popupMenuCurrent) (&gt;@c:FlightPlanWaypointIndex) (@c:FlightPlanWaypointICAO) (&gt;@c:FacilityICAO) 
					@CancelPopupMenu
					5 (&gt;@g:blinkingField)
					quit
				}
				(@g:popupMenu) 63 == if{
					:163
					0 (&gt;@g:directToActivateLeg)
					(@g:popupMenuCurrent) (&gt;@c:NearestAirportCurrentLine) (@c:NearestAirportCurrentICAO) (&gt;@c:FacilityICAO)
					@CancelPopupMenu
					5 (&gt;@g:blinkingField)
					quit
				}
				10 19 (@g:enteringInput) rng if{ 
					(@c:IcaoSearchMatchedIcaosNumber) 1 &lt; if{
						@CancelInput
						quit
					}
					0 (&gt;@c:IcaoSearchStopCursor) @InitBlinker (@g:enteringInput) sp0 0 (&gt;@g:enteringInput) 
					(@c:IcaoSearchMatchedIcaosNumber) 1 &gt; if{	  
						l0 (&gt;@g:enteringInputSaved) @InvokePopupMenu(10, 92, 30, 200, 180, 36, 2, (@c:IcaoSearchMatchedIcaosNumber))
					} 
					g101
				}
				(@g:enteringInput) 31 == if{
					(@c:IcaoSearchMatchedIcaosNumber) 1 &lt; if{
						@CancelInput
						quit
					}
					0 (&gt;@c:IcaoSearchStopCursor) @InitBlinker 0 (&gt;@g:enteringInput) 
					0 (&gt;@g:directToActivateLeg)
					(@c:IcaoSearchMatchedIcaosNumber) 1 &gt; if{	  
						31 (&gt;@g:enteringInputSaved) @InvokePopupMenu(10, 96, 20, 200, 190, 36, 2, (@c:IcaoSearchMatchedIcaosNumber))
					} 
					(@c:IcaoSearchCurrentIcao) (&gt;@c:FacilityICAO)
					quit
				}
				(@g:enteringInput) 110 == if{ 
					(@c:NameSearchCurrentMatch) if{
						(@c:NameSearchCurrentIcao) (&gt;@c:WaypointAirportICAO)
						0 (&gt;@c:NameSearchStopCursor) @InitBlinker 0 (&gt;@g:enteringInput) 
					}
					els{
						@CancelInput
					}
					quit
				}
				(@g:enteringInput) 131 == if{ 
					(@c:NameSearchCurrentMatch) if{
						(@c:NameSearchCurrentIcao) (&gt;@c:FacilityICAO) 5 (&gt;@g:blinkingField)
						0 (&gt;@c:NameSearchStopCursor) @InitBlinker 0 (&gt;@g:enteringInput) 
					}
					els{
						@CancelInput
					}
					quit
				}
				(@g:directTo) 0 != if{ 
					@InitBlinker
					0 (&gt;@g:directToActivateLeg)
					(@g:blinkingField) 1 == if{ 5 (&gt;@g:blinkingField) quit }
					(@g:blinkingField) 2 == if{ 5 (&gt;@g:blinkingField) quit }
					(@g:blinkingField) 3 == if{ 0 (&gt;@g:popupMenuCurrent) g162 quit }
					(@g:blinkingField) 4 == if{ 0 (&gt;@g:popupMenuCurrent) g163 quit }
					(@g:blinkingField) 5 == if{ (@c:FacilityICAO) (&gt;@c:FlightPlanNewWaypointICAO) 1 (&gt;@c:FlightPlanDirectToDestination) @EscapeMenu quit }
					quit
				}
				(@g:currentGroup) @kNRSTPageGroup == (@g:listItems) 1 == and if{
					0 (&gt;@g:listItems)
					(@g:currentPageNRST) 0 == if{ @kWPTPageGroup (&gt;@g:currentGroup) 0 (&gt;@g:currentPageWPT) @PageInit (@g:listCurrent) (&gt;@c:NearestAirportCurrentLine) (@c:NearestAirportCurrentICAO) (&gt;@c:WaypointAirportICAO) quit }
					(@g:currentPageNRST) 1 == if{ @kWPTPageGroup (&gt;@g:currentGroup) 4 (&gt;@g:currentPageWPT) @PageInit (@g:listCurrent) (&gt;@c:NearestIntersectionCurrentLine) (@c:NearestIntersectionCurrentICAO) (&gt;@c:WaypointIntersectionICAO) quit }
					(@g:currentPageNRST) 2 == if{ @kWPTPageGroup (&gt;@g:currentGroup) 5 (&gt;@g:currentPageWPT) @PageInit (@g:listCurrent) (&gt;@c:NearestNdbCurrentLine) (@c:NearestNdbCurrentICAO) (&gt;@c:WaypointNdbICAO) quit }
					(@g:currentPageNRST) 3 == if{ @kWPTPageGroup (&gt;@g:currentGroup) 6 (&gt;@g:currentPageWPT) @PageInit (@g:listCurrent) (&gt;@c:NearestVorCurrentLine) (@c:NearestVorCurrentICAO) (&gt;@c:WaypointVorICAO) quit }
				}
				(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) @kWPTPageAptFreq == and (@g:listItems) 1 == and if{
					(@g:listCurrent) (&gt;@c:WaypointAirportCurrentFrequency)
					(@c:WaypointAirportFrequencyType) 1 == if{ (@c:WaypointAirportFrequencyValue, Frequency BCD16) (&gt;K:COM_STBY_RADIO_SET) }
					(@c:WaypointAirportFrequencyType) 2 == if{ (@c:WaypointAirportFrequencyValue, Frequency BCD16) (&gt;K:NAV1_STBY_SET) }
					(@c:WaypointAirportFrequencyType) 3 == if{ (@c:WaypointAirportFrequencyValue, Frequency ADF BCD32) (&gt;K:ADF_COMPLETE_SET) }
					0 (&gt;@g:listItems)
					quit
				}
				(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) @kWPTPageNdb == and (@g:blinkingField) 2 == and if{
					(@c:WaypointNdbFrequency, Frequency ADF BCD32) (&gt;K:ADF_COMPLETE_SET)
					0 (&gt;@g:blinkingField)
					quit
				}
				(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) @kWPTPageVor == and (@g:blinkingField) 2 == and if{
					(@c:WaypointVorFrequency, Frequency BCD16) (&gt;K:NAV1_STBY_SET)
					0 (&gt;@g:blinkingField)
					quit
				}
				(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) @kWPTPageAptApproach == and if{
					(@g:blinkingField) 4 == (@g:blinkingField) 5 == or if{
						(@c:WaypointAirportICAO) (&gt;@c:FlightPlanNewApproachAirport)
						(@g:currentAirportApproach) (&gt;@c:FlightPlanNewApproachApproach)
						(@g:currentAirportTransition) (&gt;@c:FlightPlanNewApproachTransition)
						1 (&gt;@c:FlightPlanNewApproachMissed)
						1 2 (@g:blinkingField) 4 == ? (&gt;@c:FlightPlanLoadApproach)
						0 3 (@g:currentAirportTransition) 0 == ? (&gt;@c:FlightPlanNewApproachAddInitialLeg)
						@kOff (&gt;@g:selectApproach)
						@FPLButton
						quit
					}
				}
				(@g:currentGroup) @kPROCPageGroup == if{
					(@g:blinkingField) 1 == if{
						@kNAVPageGroup (&gt;@g:currentGroup)
						@kNAVPageDflt (&gt;@g:currentPageNAV)
						@PageInit
						1 (&gt;@c:FlightPlanNewApproachMissed)
						3 (&gt;@c:FlightPlanLoadApproach)
						0 (&gt;@c:FlightPlanNewApproachAddInitialLeg)
					}
				    (@g:blinkingField) 2 == if{
						@kNAVPageGroup (&gt;@g:currentGroup)
						@kNAVPageDflt (&gt;@g:currentPageNAV)
						@PageInit
						1 (&gt;@c:FlightPlanIsActiveApproach)
				    }
				    (@g:blinkingField) 3 == if{
						@kWPTPageGroup (&gt;@g:currentGroup)
						3 (&gt;@g:currentPageWPT)
						@PageInit
						(@c:FlightPlanIsActiveFlightPlan) if{
							(@c:FlightPlanWaypointsNumber) -- (&gt;@c:FlightPlanWaypointIndex)
							(@c:FlightPlanWaypointICAO) (&gt;@c:WaypointAirportICAO)
							2 (&gt;@g:blinkingField)
							@InvokePopupSelectApproach
						}
						els{ 
							1 (&gt;@g:blinkingField)
						}
						@InitBlinker
						@kOn (&gt;@g:selectApproach)
				    }
					quit
				}
				0 (&gt;@g:blinkingField)
		</Macro>
		<Area Name="ENT Button" Left="405" Top="232" Width="34" Height="21">
			<Click Kind="LeftSingle">
				1 (&gt;@g:entButtonDown) @ENTButton
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_ENTER_BUTTON" />
		</Area>
		<!-- DTO Button -->
		<Macro Name="DTOButton">
      @PowerOn ! if{ quit }
      (@g:directTo) @kOn == if{
      @EscapeMenu
      (@g:directToActivateLeg) 0 &gt; (@c:FacilityValid) and if{
      @kOn (&gt;@g:activateLeg)
      }
      els{
      @kOn (&gt;@g:directTo) (@g:blinkingField) 5 == if{ 1 } els{ 5 } (&gt;@g:blinkingField)
      }
      quit
      }
      (@g:listItems) sp2
      (@g:listCurrent) sp1
      @EscapeMenu @kOn (&gt;@g:directTo) 1 (&gt;@g:blinkingField)
      0 (&gt;@g:directToActivateLeg)
      (@g:currentGroup) @kWPTPageGroup == 0 3 (@g:currentPageWPT) rng and if{ (@c:WaypointAirportICAO) g10 }
      (@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 4 == and if{ (@c:WaypointIntersectionICAO) g10 }
      (@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 5 == and if{ (@c:WaypointNdbICAO) g10 }
      (@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 6 == and if{ (@c:WaypointVorICAO) g10 }
      (@g:currentGroup) @kNRSTPageGroup == (@g:currentPageNRST) 0 == l2 and and if{ l1 (&gt;@c:NearestAirportCurrentLine) (@c:NearestAirportCurrentICAO) g10 }
      (@g:currentGroup) @kNRSTPageGroup == (@g:currentPageNRST) 1 == l2 and and if{ l1 (&gt;@c:NearestIntersectionCurrentLine) (@c:NearestIntersectionCurrentICAO) g10 }
      (@g:currentGroup) @kNRSTPageGroup == (@g:currentPageNRST) 2 == l2 and and if{ l1 (&gt;@c:NearestNdbCurrentLine) (@c:NearestNdbCurrentICAO) g10 }
      (@g:currentGroup) @kNRSTPageGroup == (@g:currentPageNRST) 3 == l2 and and if{ l1 (&gt;@c:NearestVorCurrentLine) (@c:NearestVorCurrentICAO) g10 }
      (@g:currentGroup) @kFPLPageGroup == (@g:currentPageFPL) 0 == l2 and and
      (@c:FlightPlanIsActiveFlightPlan) and 1 (@c:FlightPlanWaypointsNumber) -- l1 @FPLEnrouteHeader - rng and if{
      l1 d (&gt;@g:directToActivateLeg) (&gt;@c:FlightPlanWaypointIndex) (@c:FlightPlanWaypointICAO) g10
      }
      (@c:FlightPlanIsDirectTo) if{ (@c:FlightPlanDirectToWaypoint) (&gt;@c:FlightPlanWaypointIndex) (@c:FlightPlanWaypointICAO) g10 }
      ''
      :10
      (&gt;@c:FacilityICAO)
    </Macro>
		<Area Name="DTO Button" Left="405" Top="129" Width="34" Height="21">
			<Click Kind="LeftSingle">
				1 (&gt;@g:directButtonDown) @DTOButton }
			</Click>
			<Cursor Type="Hand" />
			<Tooltip ID="TOOLTIPTEXT_GPS_DIRECT_TO_BUTTON" />
		</Area>
		<!-- Range Button -->
		<Macro Name="ZOOMINButton">
      @PowerOn ! if{ quit }
      (@g:directTo) 0 == (@g:currentGroup) @kNAVPageGroup  == (@g:currentPageNAV) 0 == and and if{
      (@g:map_ZoomStep0) -- 1 max (&gt;@g:map_ZoomStep0)
      }
      (@g:directTo) 0 == (@g:currentGroup) @kNAVPageGroup  == (@g:currentPageNAV) 1 == and and if{
      (@g:map_ZoomStep1) -- 1 max (&gt;@g:map_ZoomStep1)
      }
      (@g:directTo) 0 == (@g:currentGroup) @kWPTPageGroup  == (@g:currentPageWPT) 1 == (@g:currentPageWPT) 3 == || and and if{
      (@g:smallmap_ZoomStep) -- 1 max (&gt;@g:smallmap_ZoomStep)
      }
    </Macro>
		<Macro Name="ZOOMOUTButton">
      @PowerOn ! if{ quit }

      (@g:directTo) 0 == (@g:currentGroup) @kNAVPageGroup  == (@g:currentPageNAV) 0 == and and if{
      (@g:map_ZoomStep0) ++ 20 min (&gt;@g:map_ZoomStep0)
      }
      (@g:directTo) 0 == (@g:currentGroup) @kNAVPageGroup  == (@g:currentPageNAV) 1 == and and if{
      (@g:map_ZoomStep1) ++ 20 min (&gt;@g:map_ZoomStep1)
      }
      (@g:directTo) 0 == (@g:currentGroup) @kWPTPageGroup  == (@g:currentPageWPT) 1 == (@g:currentPageWPT) 3 == || and and if{
      (@g:smallmap_ZoomStep) ++ 18 min (&gt;@g:smallmap_ZoomStep)
      }
    </Macro>
    <Area Name="RNG Button" Left="410" Top="46" Width="28" Height="70">
      <Area Name="RNG Out" Top="35" GpsSpecific="Y">
        <Click Kind="LeftSingle">
          1 (&gt;@g:zoominButtonDown) @ZOOMINButton
        </Click>
        <Cursor Type="UpArrow" />
        <Tooltip ID="TOOLTIPTEXT_GPS_RANGE_UP" />
      </Area>
      <Area Name="RNG In" Bottom="35" GpsSpecific="Y">
        <Click Kind="LeftSingle">
          1 (&gt;@g:zoomoutButtonDown) @ZOOMOUTButton
        </Click>
        <Cursor Type="DownArrow" />
        <Tooltip ID="TOOLTIPTEXT_GPS_RANGE_DOWN" />
      </Area>
    </Area>
		
		
		<Macro Name="ResetList">
			0 (&gt;@g:listCurrent) 0 (&gt;@g:listScroll)
		</Macro>
		<Macro Name="TopLeftKnob">
      @PowerOn ! if{ quit }
      (@g:popupMenu) 0 != if{ (@g:popupMenuCurrent) -- 0 max (&gt;@g:popupMenuCurrent) @InitBlinker quit }
      10 19 (@g:enteringInput) rng 31 (@g:enteringInput) == || if{ -1 (&gt;@c:IcaoSearchAdvanceCursor) @InitBlinker quit }
      110 119 (@g:enteringInput) rng 131 (@g:enteringInput) == || if{ -1 (&gt;@c:NameSearchAdvanceCursor) @InitBlinker quit }
      (@g:listItems) 0 != if{
      @InitBlinker
      (@g:listCurrent) 0 == (@g:numberOfBlinkingFields) 0 &gt; and if{
      0 (&gt;@g:listItems) (@g:numberOfBlinkingFields) (&gt;@g:blinkingField) g100
      }
      (@g:listCurrent) -- 0 max (&gt;@g:listCurrent) quit
      }
      (@g:blinkingField) 0 &gt; if{
      (@g:blinkingField) -- 1 max (&gt;@g:blinkingField) @InitBlinker
      :100
      (@g:directTo) 0 != if{
      (@g:blinkingField) 5 == (@c:FacilityValid) ! and if{ 4 (&gt;@g:blinkingField) }
      (@g:blinkingField) 4 == (@c:NearestAirportItemsNumber) 1 &lt; and if{ 3 (&gt;@g:blinkingField) } 
					(@g:blinkingField) 3 == (@c:FlightPlanIsActiveFlightPlan) ! and if{ 2 (&gt;@g:blinkingField) } 
				}
				@ProcedureScrollUp
			quit }
			(@g:directTo) 0 != if{ quit }
			@ResetList
			@kNAVPageGroup @kNRSTPageGroup (@g:currentGroup) rng if{
				(@g:currentGroup) -- @kNAVPageGroup max (&gt;@g:currentGroup) @PageInit
			}
		</Macro>
		<Macro Name="TopRightKnob">
      @PowerOn ! if{ quit }
      (@g:popupMenu) 0 != if{ (@g:popupMenuCurrent) ++ (@g:popupMenuMaxElements) 1 - min 0 max (&gt;@g:popupMenuCurrent) @InitBlinker quit }
      10 19 (@g:enteringInput) rng 31 (@g:enteringInput) == || if{ 1 (&gt;@c:IcaoSearchAdvanceCursor) @InitBlinker quit }
      110 119 (@g:enteringInput) rng 131 (@g:enteringInput) == || if{ 1 (&gt;@c:NameSearchAdvanceCursor) @InitBlinker quit }
      (@g:listItems) 0 != if{ (@g:listCurrent) ++ (@g:listMaxElements) 1 - min 0 max (&gt;@g:listCurrent) @InitBlinker quit }
      (@g:blinkingField) 0 &gt; if{
      @InitBlinker
      (@g:blinkingField) (@g:numberOfBlinkingFields) == (@g:listMaxElements) 0 &gt; and if{
      0 (&gt;@g:blinkingField) 0 (&gt;@g:listCurrent) 1 (&gt;@g:listItems) quit
      }
      (@g:blinkingField) ++ (@g:numberOfBlinkingFields) min (&gt;@g:blinkingField)
      (@g:directTo) 0 != if{
      (@g:blinkingField) 3 == (@c:FlightPlanIsActiveFlightPlan) ! and if{ 4 (&gt;@g:blinkingField) }
      (@g:blinkingField) 4 == (@c:NearestAirportItemsNumber) 1 &lt; and if{ 5 (&gt;@g:blinkingField) } 
					(@g:blinkingField) 5 == (@c:FacilityValid) ! and if{ 4 (&gt;@g:blinkingField) } 
					(@g:blinkingField) 4 == (@c:NearestAirportItemsNumber) 1 &lt; and if{ 3 (&gt;@g:blinkingField) } 
					(@g:blinkingField) 3 == (@c:FlightPlanIsActiveFlightPlan) ! and if{ 2 (&gt;@g:blinkingField) } 
				}
				@ProcedureScrollDown
			quit }
			(@g:directTo) 0 != if{ quit }
			@ResetList
			@kNAVPageGroup @kNRSTPageGroup (@g:currentGroup) rng if{
				(@g:currentGroup) ++ @kNRSTPageGroup min (&gt;@g:currentGroup) @PageInit
			}
		</Macro>
		<Macro Name="InvokeICAOInputMode">@1 (&gt;@c:IcaoSearchInitialIcao) @2 (&gt;@c:IcaoSearchStartCursor) @3 (&gt;@g:enteringInput) 0 (&gt;@c:IcaoSearchMatchedIcao) @InitBlinker</Macro>
		<Macro Name="InvokeNameInputMode">@1 (&gt;@c:NameSearchInitialIcao) @2 (&gt;@c:NameSearchInitialName) @3 (&gt;@c:NameSearchStartCursor) @4 (&gt;@g:enteringInput) @InitBlinker</Macro>
		<Macro Name="InvokeCurrentPopupMenu">
			(@g:blinkingField) 0 &gt; if{ 
					(@g:directTo) 0 != if{ 
						(@g:blinkingField) 1 == if{ @InvokeICAOInputMode((@c:FacilityICAO), 'AVNWM', 31) }
						(@g:blinkingField) 2 == if{ @InvokeNameInputMode((@c:FacilityICAO), (@c:FacilityName), 'AVNWM', 131) }
						(@g:blinkingField) 3 == if{ @InvokePopupMenu(62, 110, 120, 100, 100, 19, 1, (@c:FlightPlanWaypointsNumber)) }
						(@g:blinkingField) 4 == if{ @InvokePopupMenu(63, 210, 120, 100, 100, 19, 1, (@c:NearestAirportItemsNumber)) }
						quit 
					}
 					(@g:currentGroup) @kWPTPageGroup == 0 3 (@g:currentPageWPT) rng and (@g:blinkingField) 1 == and if{ @InvokeICAOInputMode((@c:WaypointAirportICAO), 'A', 10) quit }
 					(@g:currentGroup) @kWPTPageGroup == 0 (@g:currentPageWPT) == and (@g:blinkingField) 2 == and if{ @InvokeNameInputMode((@c:WaypointAirportICAO), (@c:WaypointAirportName), 'A', 110) quit }
					(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 4 == and (@g:blinkingField) 1 == and if{ @InvokeICAOInputMode((@c:WaypointIntersectionICAO), 'W', 11) quit }
					(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 5 == and (@g:blinkingField) 1 == and if{ @InvokeICAOInputMode((@c:WaypointNdbICAO), 'N', 12) quit }
					(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 6 == and (@g:blinkingField) 1 == and if{ @InvokeICAOInputMode((@c:WaypointVorICAO), 'V', 13) quit }
					(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 1 == and (@g:blinkingField) 2 == and if{ @InvokePopupMenu(1, 200, 55, 71, 180, 19, 1, (@c:WaypointAirportRunwaysNumber)) (@g:currentAirportRunway) (&gt;@g:popupMenuCurrent) quit }
					(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 3 == and (@g:blinkingField) 2 == and if{ @InvokePopupSelectApproach quit }
					(@g:currentGroup) @kWPTPageGroup == (@g:currentPageWPT) 3 == and (@g:blinkingField) 3 == and if{ @InvokePopupSelectTransition quit }
				quit }
		</Macro>
		<Macro Name="BottomLeftKnob">
      @PowerOn ! if{ quit }
      (@g:popupMenu) 0 != if{ (@g:popupMenuCurrent) -- 0 max (&gt;@g:popupMenuCurrent) @InitBlinker quit }
      10 19 (@g:enteringInput) rng 31 (@g:enteringInput) == || if{ -1 (&gt;@c:IcaoSearchAdvanceCharacter) @InitBlinker quit }
      110 119 (@g:enteringInput) rng 131 (@g:enteringInput) == || if{ -1 (&gt;@c:NameSearchAdvanceCharacter) @InitBlinker quit }
      (@g:listItems) 0 != if{ quit }
      @InvokeCurrentPopupMenu
      (@g:directTo) 0 != if{ quit }
      (@g:currentGroup) @kNAVPageGroup == if{ (@g:currentPageNAV) -- 0 max (&gt;@g:currentPageNAV) }
      (@g:currentGroup) @kWPTPageGroup == if{ (@g:currentPageWPT) -- 0 max (&gt;@g:currentPageWPT) }
      (@g:currentGroup) @kNRSTPageGroup == if{ (@g:currentPageNRST) -- 0 max (&gt;@g:currentPageNRST) }
      (@g:currentGroup) @kFPLPageGroup == if{ (@g:currentPageFPL) -- 0 max (&gt;@g:currentPageFPL) }
      @ResetList
      @PageInit
    </Macro>
		<Macro Name="BottomRightKnob">
      @PowerOn ! if{ quit }
      (@g:popupMenu) 0 != if{ (@g:popupMenuCurrent) ++ (@g:popupMenuMaxElements) 1 - min 0 max (&gt;@g:popupMenuCurrent) @InitBlinker quit }
      10 19 (@g:enteringInput) rng 31 (@g:enteringInput) == || if{ 1 (&gt;@c:IcaoSearchAdvanceCharacter) @InitBlinker quit }
      110 119 (@g:enteringInput) rng 131 (@g:enteringInput) == || if{ 1 (&gt;@c:NameSearchAdvanceCharacter) @InitBlinker quit }
      (@g:listItems) 0 != if{ quit }
      @InvokeCurrentPopupMenu
      (@g:directTo) 0 != if{ quit }
      (@g:currentGroup) @kNAVPageGroup == if{ (@g:currentPageNAV) ++ @NumberOfPagesInCurrentGroup 1 - min (&gt;@g:currentPageNAV) }
      (@g:currentGroup) @kWPTPageGroup == if{ (@g:currentPageWPT) ++ @NumberOfPagesInCurrentGroup 1 - min (&gt;@g:currentPageWPT) }
      (@g:currentGroup) @kNRSTPageGroup == if{ (@g:currentPageNRST) ++ @NumberOfPagesInCurrentGroup 1 - min (&gt;@g:currentPageNRST) }
      (@g:currentGroup) @kFPLPageGroup == if{ (@g:currentPageFPL) ++ @NumberOfPagesInCurrentGroup 1 - min (&gt;@g:currentPageFPL) }
      @ResetList
      @PageInit
    </Macro>
		<Macro Name="PushCRSRButton">
      @PowerOn ! if{ quit }
      (@g:currentGroup) @kPROCPageGroup == if{ @EscapeMenu @kNAVPageGroup (&gt;@g:currentGroup) quit }
      (@g:popupMenu) 0 != if{ @CancelPopupMenu quit }
      (@g:enteringInput) 0 != if{ @CancelInput quit }
      (@g:directTo) 0 != if{ @EscapeMenu quit }
      (@g:blinkingField) 0 &gt; if{ 0 (&gt;@g:blinkingField) quit }
      (@g:listItems) 0 != if{ 0 (&gt;@g:listItems) quit }
      (@g:numberOfBlinkingFields) 0 &gt; if{ 1 (&gt;@g:blinkingField) @InitBlinker quit }
      (@g:listMaxElements) 0 &gt; if{  1 (&gt;@g:listItems) @InitBlinker  quit }
    </Macro>
		<!-- Top Left Knob (295 Top) -->
		<Area Left="396" Top="306" Width="16" Height="10">
			<Cursor Type="DownArrow" />
			<Click>@TopLeftKnob</Click>
			<MouseWheelUp>@TopLeftKnob</MouseWheelUp>
			<MouseWheelDown>@TopRightKnob</MouseWheelDown>
			<Tooltip ID="TOOLTIPTEXT_GPS_GROUP_KNOB_LEFT" />
		</Area>
		<!-- Top Right Knob (295 Bottom) -->
		<Area Left="417" Top="306" Width="16" Height="10">
			<Cursor Type="UpArrow" />
			<Click>@TopRightKnob</Click>
			<MouseWheelUp>@TopLeftKnob</MouseWheelUp>
			<MouseWheelDown>@TopRightKnob</MouseWheelDown>
			<Tooltip ID="TOOLTIPTEXT_GPS_GROUP_KNOB_RIGHT" />
		</Area>
		<!-- Bottom Left Knob (295 Left) -->
		<Area Left="402" Top="321" Width="12" Height="10">
			<Cursor Type="DownArrow" />
			<Click>@BottomLeftKnob</Click>
			<MouseWheelUp>@BottomLeftKnob</MouseWheelUp>
			<MouseWheelDown>@BottomRightKnob</MouseWheelDown>
			<Tooltip ID="TOOLTIPTEXT_GPS_PAGE_KNOB_LEFT" />
		</Area>
		<!-- Bottom Right Knob (295 Right) -->
		<Area Left="416" Top="321" Width="12" Height="10">
			<Cursor Type="UpArrow" />
			<Click>@BottomRightKnob</Click>
			<MouseWheelUp>@BottomLeftKnob</MouseWheelUp>
			<MouseWheelDown>@BottomRightKnob</MouseWheelDown>
			<Tooltip ID="TOOLTIPTEXT_GPS_PAGE_KNOB_RIGHT" />
		</Area>
		<!-- Push CRSR btn -->
		<Area Left="399" Top="336" Width="35" Height="35">
			<Cursor Type="Hand" />
			<Click Kind="LeftSingle">
				1 (&gt;@g:crsrButtonDown) @PushCRSRButton				
			</Click>
			<MouseWheelUp>@BottomLeftKnob</MouseWheelUp>
			<MouseWheelDown>@BottomRightKnob</MouseWheelDown>
			<Tooltip ID="TOOLTIPTEXT_GPS_CRSR_BUTTON" />
		</Area>
		<Area Name="ViewWindowTooltop" Left="92" Top="40" Width="280" Height="230">
			<Tooltip>%('')%((@g:currentGroup))%{case}
				%{:@kNAVPageGroup}%((@g:currentPageNAV))%{case}
					%{:@kNAVPageDflt}%((R:TOOLTIPTEXT_GPS_DEFAULT_NAV_PAGE))%{:@kNAVPageMap}%((R:TOOLTIPTEXT_GPS_MAP_PAGE))%{end}%{:88}
				%{:@kWPTPageGroup}%((@g:currentPageWPT))%{case}
					%{:@kWPTPageAptLoc}%((R:TOOLTIPTEXT_GPS_AIRPORT_LOCATION_PAGE))%{:@kWPTPageAptRun}%((R:TOOLTIPTEXT_GPS_AIRPORT_RUNWAY_PAGE))%{:@kWPTPageAptFreq}%((R:TOOLTIPTEXT_GPS_AIRPORT_FREQUENCY_PAGE))%{:@kWPTPageAptApproach}%((R:TOOLTIPTEXT_GPS_AIRPORT_APPROACH_PAGE))%{:88}
					%{:@kWPTPageInt}%((R:TOOLTIPTEXT_GPS_INTERSECTION_PAGE))%{:@kWPTPageNdb}%((R:TOOLTIPTEXT_GPS_NDB_PAGE))%{:@kWPTPageVor}%((R:TOOLTIPTEXT_GPS_VOR_PAGE))%{end}%{:88}
				%{:@kNRSTPageGroup}%((@g:currentPageNRST))%{case}
					%{:@kNRSTPageApt}%((R:TOOLTIPTEXT_GPS_NEAREST_AIRPORT_PAGE))%{:@kNRSTPageInt}%((R:TOOLTIPTEXT_GPS_NEAREST_INTERSECTION_PAGE))%{:@kNRSTPageNDB}%((R:TOOLTIPTEXT_GPS_NEAREST_NDB_PAGE))%{:@kNRSTPageVOR}%((R:TOOLTIPTEXT_GPS_NEAREST_VOR_PAGE))%{:@kNRSTPageASP}%((R:TOOLTIPTEXT_GPS_NEAREST_AIRSPACE_PAGE))%{end}%{:88}
				%{:@kFPLPageGroup}%((R:TOOLTIPTEXT_GPS_FLIGHT_PLAN_PAGE))%{:88}
				%{:@kPROCPageGroup}%((R:TOOLTIPTEXT_GPS_PROCEDURES_PAGE))%{:88}
				%{end}%!s!</Tooltip>
		</Area>
	</Mouse>
	<Keys>
		<On Event="GPS_NEAREST_BUTTON">@NRSTButton</On>
		<On Event="GPS_OBS_BUTTON">@OBSButton</On>
		<On Event="GPS_MSG_BUTTON">@MSGButton</On>	
		<On Event="GPS_FLIGHTPLAN_BUTTON">@FPLButton</On>
		<On Event="GPS_TERRAIN_BUTTON">@TerrainButton</On>
		<On Event="GPS_PROCEDURE_BUTTON">@PROCButton</On>
		<On Event="GPS_ZOOMIN_BUTTON">@ZOOMINButton</On>
		<On Event="GPS_ZOOMOUT_BUTTON">@ZOOMOUTButton</On>
		<On Event="GPS_DIRECTTO_BUTTON">@DTOButton</On>
		<On Event="GPS_MENU_BUTTON">@MENUButton</On>
		<On Event="GPS_CLEAR_BUTTON">@CLRButton</On>
		<On Event="GPS_CLEAR_ALL_BUTTON">@CLRALLButton</On>
		<On Event="GPS_ENTER_BUTTON">@ENTButton</On>
		<On Event="GPS_CURSOR_BUTTON">@PushCRSRButton</On>
		<On Event="GPS_GROUP_KNOB_INC">@TopRightKnob</On>
		<On Event="GPS_GROUP_KNOB_DEC">@TopLeftKnob</On>
		<On Event="GPS_PAGE_KNOB_INC">@BottomRightKnob</On>
		<On Event="GPS_PAGE_KNOB_DEC">@BottomLeftKnob</On>
		<On Key="AlphaNumeric">
			<Visible>10 19 (C:fs9gps:enteringInput) rng 31 (C:fs9gps:enteringInput) == or</Visible>
			(M:Key) chr (&gt;C:fs9gps:IcaoSearchEnterChar) @InitBlinker
		</On>
		<On Key="Ascii">
			<Visible>110 119 (C:fs9gps:enteringInput) rng 131 (C:fs9gps:enteringInput) == or</Visible>
			(M:Key) chr (&gt;C:fs9gps:NameSearchEnterChar) @InitBlinker
		</On>
		<On Key="Backspace">
			<Visible>(C:fs9gps:enteringInput)</Visible>
			10 19 (C:fs9gps:enteringInput) rng 31 (C:fs9gps:enteringInput) == || if{ -1 (&gt;C:fs9gps:IcaoSearchBackupChar) @InitBlinker quit }
			110 119 (C:fs9gps:enteringInput) rng 131 (C:fs9gps:enteringInput) == || if{ -1 (&gt;C:fs9gps:NameSearchBackupChar) @InitBlinker quit }
		</On>
		<On Event="GPS_MSG_BUTTON_DOWN">(@g:msgButtonDown) 0 == if{ 1 (&gt;@g:msgButtonDown) 0 (&gt;@g:msgButtonCount) }</On>
		<On Event="GPS_MSG_BUTTON_UP">(@g:msgButtonDown) 1 == if{ 0 (&gt;@g:msgButtonDown) (@g:msgButtonCount) @MSGButtonDelay &lt; if{ @MSGButton } }</On>
	</Keys>
	<!--
	<Element Name="DebugWindow">
		<Position X="6" Y="340" />
		<Clip Left="0" Right="0" Width="360" Height="32" />
		<Element Name="WPTRect">
			<Position X="0" Y="0" />
			<Rectangle Width="320" Height="13" FillColor="#2A76E8" Bright="Yes" />
		</Element>
		<Element Name="WPTText">
			<Position X="2" Y="0" />
			<FormattedText X="320" Y="11" Font="Arial Black" FontSize="8" Adjust="Left" VerticalAdjust="Center" Color="0xF0D0D0" Multiline="No" Bright="Yes">
				<String>activateLeg: %((@g:activateLeg))%!d! directoactivateLeg: %((@g:directToActivateLeg))%!d! %(@FPLLegalLeg((@g:listCurrent)))%!d! %((@g:listCurrent))%!d!</String>
			</FormattedText>
		</Element>
	</Element>
	-->
</Gauge>